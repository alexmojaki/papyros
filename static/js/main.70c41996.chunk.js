(this.webpackJsonppapyros=this.webpackJsonppapyros||[]).push([[0],[,,,function(e,n,t){"use strict";(function(e,o){t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return d}));var r=t(0),a=t.n(r),c=t(1),i=t(2),s=new Map;function u(n){var t;switch(n=n.toLowerCase()){case"python":t=new Worker(e,void 0);break;case"javascript":t=new Worker(o,void 0);break;default:throw new Error("".concat(n," is not yet supported."))}var r=Object(i.c)(t);return s.set(r,t),r}function d(e){return l.apply(this,arguments)}function l(){return(l=Object(c.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.has(n)){e.next=7;break}s.get(n).terminate(),n[i.b](),s.delete(n),e.next=8;break;case 7:throw new Error("Unknown backend supplied for language ".concat(n.toString()));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}).call(this,t(7),t(8))},,function(e,n,t){},,function(e,n,t){e.exports=t.p+"static/js/0.8ed1cb57.chunk.worker.js"},function(e,n,t){e.exports=t.p+"static/js/1.4893d024.chunk.worker.js"},function(e,n,t){"use strict";t.r(n);t(4),t(5);var o=t(0),r=t.n(o),a=t(1),c=t(2),i=t(3);!function(){var e,n=document.getElementById("code-area"),t=0,o=document.getElementById("code-input-area"),s=document.getElementById("code-output-area"),u=document.getElementById("language-select"),d=document.getElementById("run-code-btn"),l=document.getElementById("terminate-btn"),p=!1,f=new TextEncoder,g=void 0,h=void 0,v="".concat(document.location.pathname,"input");function b(n){return d.disabled=!0,n&&(u.value=n),(e=Object(i.a)(u.value)).launch(Object(c.a)((function(e){return function(e){console.log("received event in onMessage",e),"output"===e.type?s.value+=e.data:"input"===e.type?function(e){m.apply(this,arguments)}(e):"error"===e.type&&y(e)}(e)})),g,h).then((function(){d.disabled=!1}))}function y(e){console.log("Got error in Papyros: ",e),s.value+=e.data}function k(){return w.apply(this,arguments)}function w(){return(w=Object(a.a)(r.a.mark((function e(){var n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Handling send Input in Papyros"),!((n=o.value.split("\n")).length>t&&n[t])){e.next=19;break}return console.log("Sending input to user: "+n[t]),a=n[t],e.next=8,fetch(v,{method:"POST",body:JSON.stringify({input:a})});case 8:e.next=14;break;case 10:c=f.encode(n[t]),g.set(c),Atomics.store(h,1,c.length),Atomics.store(h,0,1);case 14:return t+=1,p=!1,e.abrupt("return",!0);case 19:return console.log("Had no input to send, still waiting!"),e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=Object(a.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Received onInput event in Papyros: ",n),e.next=3,k();case 3:if(e.sent){e.next=6;break}p=!0,console.log("User needs to enter input before code can continue");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}"undefined"!==typeof SharedArrayBuffer||"serviceWorker"in navigator?navigator.serviceWorker.register("./inputServiceWorker.js",{scope:""}):(console.log(typeof SharedArrayBuffer),console.log(navigator),console.log(navigator.serviceWorker),console.log("Your browser is unsupported. Please use a modern version of Chrome, Safari, Firefox, ...")),b(new URLSearchParams(window.location.search).get("language")||"python"),o.onkeydown=function(e){console.log("Key down in inputArea",e),p&&"enter"===e.key.toLowerCase()&&(console.log("Pressed enter! Sending input to user"),k())},d.addEventListener("click",(function(){return d.disabled=!0,t=0,s.value="",l.hidden=!1,console.log("Running code in Papyros, sending to backend"),e.runCode(n.value).catch(y).finally((function(){l.hidden=!0,d.disabled=!1}))})),l.addEventListener("click",(function(){return console.log("Called terminate, stopping backend!"),l.hidden=!0,Object(i.b)(e).then((function(){return b()}))})),u.addEventListener("change",(function(){return Object(i.b)(e).finally((function(){return b()}))}))}()}],[[9,1,2]]]);
//# sourceMappingURL=main.70c41996.chunk.js.map