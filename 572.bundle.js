(()=>{"use strict";var e,n,t={572:(e,n,t)=>{var r,o=t(375),i=t(872),s="__init_papyros",a="__process_code",l='\nfrom pyodide import to_js, eval_code_async\nfrom js import console\nimport sys\nimport ast\nimport json\nimport html\nimport micropip\nawait micropip.install(\'friendly_traceback\')\nimport friendly_traceback\nfrom friendly_traceback.core import FriendlyTraceback\n\n__papyros = None\n\nclass __Papyros():\n    def __init__(self, cb):\n        self.cb = cb\n        self.line = ""\n        self.override_builtins()\n\n    def message(self, data):\n        return self.cb(to_js(data))\n\n    def override_builtins(self):\n        self.override_output()\n        self.override_input()\n\n    def override_output(self):\n        class __OutputWriter:\n            def __init__(self, type, on_write):\n                self.encoding = "utf-8"\n                self.type = type\n                self.on_write = on_write\n                \n            def write(self, s):\n                self.on_write(dict(type=self.type, data=s))\n\n            def flush(self):\n                pass # Given data is always immediately written\n        on_write = lambda d: self.message(d)\n        sys.stdout = __OutputWriter("output", on_write)\n        sys.stderr = __OutputWriter("error", on_write)\n\n    def readline(self, n=-1, prompt=""):\n        if not self.line:\n            self.line = self.message(dict(type="input", data=prompt)) + "\\n"\n        if n < 0 or n > len(self.line):\n            n = len(self.line)\n        to_return = self.line[0:n]\n        self.line = self.line[n:]\n        return to_return\n\n    def override_input(self):\n        global input\n        input = lambda prompt="": self.readline(prompt=prompt)[:-1] # Remove newline\n\n        sys.stdin.readline = self.readline\n\ndef clean_traceback(tb, filename):\n    # For some reason the first character of __file__ is lost in friendly_traceback\n    for prefix in ["\\"", "\\\'", " "]:\n        tb = tb.replace(prefix + filename[1:], prefix + filename)\n    return html.escape(tb)\n\ndef format_exception(filename, exc):\n    fr = FriendlyTraceback(type(exc), exc, exc.__traceback__)\n    fr.assign_generic()\n    fr.assign_cause()\n    tb = fr.info.get("simulated_python_traceback", "No traceback")\n    info = fr.info.get("generic", "No information available.")\n    why = fr.info.get("cause", "Unknown cause")\n    suggestions = fr.info.get("suggest", "No suggestions")\n    what = fr.info.get("message", "No message")\n    user_start = 0\n    tb_lines = tb.split("\\n")\n    while user_start < len(tb_lines) and filename not in tb_lines[user_start]:\n        user_start += 1\n    name = type(exc).__name__\n    user_end = user_start + 1\n    while user_end < len(tb_lines) and name not in tb_lines[user_end]:\n        user_end += 1\n    where = "\\n".join(tb_lines[user_start:user_end]) or "No location"\n    return json.dumps(\n        dict(\n            name=name,\n            traceback=tb,\n            info=info,\n            why=why,\n            where=where,\n            what=what,\n            suggestions=suggestions\n        )\n    )\n\ndef '.concat(s,'(cb):\n    globals()["__name__"] = "__main__"\n    global __papyros\n    __papyros = __Papyros(cb)\n\nasync def ').concat(a,'(code, run, filename="my_code.py"):\n    with open(filename, "w") as f:\n        f.write(code)\n    globals()["__file__"] = filename\n    try:\n        if run:\n            await eval_code_async(code, globals(), filename=filename)\n        else:\n            compile(code, filename, mode="exec", flags=ast.PyCF_ALLOW_TOP_LEVEL_AWAIT)\n        return True\n    except Exception as e:\n        global __papyros\n        __papyros.message(dict(type="error", data=format_exception(filename, e)))\n        return False\n\n'),c=(r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},r(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}r(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),f=function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,a)}l((r=r.apply(e,n||[])).next())}))},u=function(e,n){var t,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(e,s)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};importScripts("https://cdn.jsdelivr.net/pyodide/v0.18.1/full/pyodide.js");var p=function(e){function n(){var n=e.call(this)||this;return n.pyodide={},n.initialized=!1,n.globals=new Map,n}return c(n,e),n.prototype.launch=function(n,t,r){return f(this,void 0,void 0,(function(){var o,i,a=this;return u(this,(function(c){switch(c.label){case 0:return[4,e.prototype.launch.call(this,n,t,r)];case 1:return c.sent(),o=this,[4,loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.18.1/full/",fullStdLib:!1})];case 2:return o.pyodide=c.sent(),[4,this.runCode(l,0)];case 3:return c.sent(),i=function(e){var n="toJs"in e?e.toJs():Object.fromEntries(e);return a.onEvent(n)},this.pyodide.globals.get(s)(i),this.globals=new Map(this.pyodide.globals.toJs()),this.initialized=!0,[2]}}))}))},n.prototype._cleanScope=function(){var e,n,t=this.pyodide.globals,r=[];try{for(var o=function(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(t.keys()),i=o.next();!i.done;i=o.next()){var s=i.value;this.globals.has(s)?t.set(s,this.globals.get(s)):r.push(s)}}catch(n){e={error:n}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}r.forEach((function(e){return t.delete(e)}))},n.prototype._runCodeInternal=function(e){return f(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return this.initialized?[4,this.pyodide.globals.get(a)(e,!1)]:[3,5];case 1:return n.sent()?[4,this.pyodide.loadPackagesFromImports(e)]:[3,4];case 2:return n.sent(),[4,this.pyodide.globals.get(a)(e,!0)];case 3:n.sent(),n.label=4;case 4:return this._cleanScope(),[3,7];case 5:return[4,this.pyodide.loadPackagesFromImports(e)];case 6:return n.sent(),[2,this.pyodide.runPythonAsync(e)];case 7:return[2]}}))}))},n}(i.z);(0,o.Jj)(new p)}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.m=t,o.x=()=>{var e=o.O(void 0,[114],(()=>o(572)));return o.O(e)},e=[],o.O=(n,t,r,i)=>{if(!t){var s=1/0;for(f=0;f<e.length;f++){for(var[t,r,i]=e[f],a=!0,l=0;l<t.length;l++)(!1&i||s>=i)&&Object.keys(o.O).every((e=>o.O[e](t[l])))?t.splice(l--,1):(a=!1,i<s&&(s=i));if(a){e.splice(f--,1);var c=r();void 0!==c&&(n=c)}}return n}i=i||0;for(var f=e.length;f>0&&e[f-1][2]>i;f--)e[f]=e[f-1];e[f]=[t,r,i]},o.d=(e,n)=>{for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((n,t)=>(o.f[t](e,n),n)),[])),o.u=e=>e+".bundle.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var n=o.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var t=n.getElementsByTagName("script");t.length&&(e=t[t.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={572:1};o.f.i=(n,t)=>{e[n]||importScripts(o.p+o.u(n))};var n=self.webpackChunkpapyros=self.webpackChunkpapyros||[],t=n.push.bind(n);n.push=n=>{var[r,i,s]=n;for(var a in i)o.o(i,a)&&(o.m[a]=i[a]);for(s&&s(o);r.length;)e[r.pop()]=1;t(n)}})(),n=o.x,o.x=()=>o.e(114).then(n),o.x()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQVNNLFFBQ2RzQyxFQUFnQjVDLEVBQVNtRCxPQUFTLEVBQ25DSixFQUEyQm5GLEssR1ZuQnhCbkIsRUFBTzJDLEVBQW9CUSxFQUMvQlIsRUFBb0JRLEVBQUksSUFDaEJSLEVBQW9COEIsRUFBRSxLQUFLa0MsS0FBSzNHLEdXRGQyQyxFQUFvQlEsSyIsInNvdXJjZXMiOlsid2VicGFjazovL3BhcHlyb3Mvd2VicGFjay9ydW50aW1lL2NodW5rIGxvYWRlZCIsIndlYnBhY2s6Ly9wYXB5cm9zL3dlYnBhY2svcnVudGltZS9zdGFydHVwIGNodW5rIGRlcGVuZGVuY2llcyIsIndlYnBhY2s6Ly9wYXB5cm9zLy4vc3JjL3dvcmtlcnMvcHl0aG9uL2luaXQucHkudHMiLCJ3ZWJwYWNrOi8vcGFweXJvcy8uL3NyYy93b3JrZXJzL3B5dGhvbi9QeXRob25Xb3JrZXIud29ya2VyLnRzIiwid2VicGFjazovL3BhcHlyb3Mvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vcGFweXJvcy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vcGFweXJvcy93ZWJwYWNrL3J1bnRpbWUvZW5zdXJlIGNodW5rIiwid2VicGFjazovL3BhcHlyb3Mvd2VicGFjay9ydW50aW1lL2dldCBqYXZhc2NyaXB0IGNodW5rIGZpbGVuYW1lIiwid2VicGFjazovL3BhcHlyb3Mvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9wYXB5cm9zL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vcGFweXJvcy93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9wYXB5cm9zL3dlYnBhY2svcnVudGltZS9pbXBvcnRTY3JpcHRzIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vcGFweXJvcy93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGRlZmVycmVkID0gW107XG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8gPSAocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSA9PiB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV0gPSBkZWZlcnJlZFtpXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoKGtleSkgPT4gKF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKSkpKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwidmFyIG5leHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLng7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnggPSAoKSA9PiB7XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmUoMTE0KS50aGVuKG5leHQpO1xufTsiLCJleHBvcnQgY29uc3QgSU5JVElBTElaRV9QWVRIT05fQkFDS0VORCA9IFwiX19pbml0X3BhcHlyb3NcIjtcbmV4cG9ydCBjb25zdCBQUk9DRVNTX1BZVEhPTl9DT0RFID0gXCJfX3Byb2Nlc3NfY29kZVwiO1xuZXhwb3J0IGNvbnN0IElOSVRJQUxJWkFUSU9OX0NPREUgPVxuICAgIGBcbmZyb20gcHlvZGlkZSBpbXBvcnQgdG9fanMsIGV2YWxfY29kZV9hc3luY1xuZnJvbSBqcyBpbXBvcnQgY29uc29sZVxuaW1wb3J0IHN5c1xuaW1wb3J0IGFzdFxuaW1wb3J0IGpzb25cbmltcG9ydCBodG1sXG5pbXBvcnQgbWljcm9waXBcbmF3YWl0IG1pY3JvcGlwLmluc3RhbGwoJ2ZyaWVuZGx5X3RyYWNlYmFjaycpXG5pbXBvcnQgZnJpZW5kbHlfdHJhY2ViYWNrXG5mcm9tIGZyaWVuZGx5X3RyYWNlYmFjay5jb3JlIGltcG9ydCBGcmllbmRseVRyYWNlYmFja1xuXG5fX3BhcHlyb3MgPSBOb25lXG5cbmNsYXNzIF9fUGFweXJvcygpOlxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjYik6XG4gICAgICAgIHNlbGYuY2IgPSBjYlxuICAgICAgICBzZWxmLmxpbmUgPSBcIlwiXG4gICAgICAgIHNlbGYub3ZlcnJpZGVfYnVpbHRpbnMoKVxuXG4gICAgZGVmIG1lc3NhZ2Uoc2VsZiwgZGF0YSk6XG4gICAgICAgIHJldHVybiBzZWxmLmNiKHRvX2pzKGRhdGEpKVxuXG4gICAgZGVmIG92ZXJyaWRlX2J1aWx0aW5zKHNlbGYpOlxuICAgICAgICBzZWxmLm92ZXJyaWRlX291dHB1dCgpXG4gICAgICAgIHNlbGYub3ZlcnJpZGVfaW5wdXQoKVxuXG4gICAgZGVmIG92ZXJyaWRlX291dHB1dChzZWxmKTpcbiAgICAgICAgY2xhc3MgX19PdXRwdXRXcml0ZXI6XG4gICAgICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgdHlwZSwgb25fd3JpdGUpOlxuICAgICAgICAgICAgICAgIHNlbGYuZW5jb2RpbmcgPSBcInV0Zi04XCJcbiAgICAgICAgICAgICAgICBzZWxmLnR5cGUgPSB0eXBlXG4gICAgICAgICAgICAgICAgc2VsZi5vbl93cml0ZSA9IG9uX3dyaXRlXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWYgd3JpdGUoc2VsZiwgcyk6XG4gICAgICAgICAgICAgICAgc2VsZi5vbl93cml0ZShkaWN0KHR5cGU9c2VsZi50eXBlLCBkYXRhPXMpKVxuXG4gICAgICAgICAgICBkZWYgZmx1c2goc2VsZik6XG4gICAgICAgICAgICAgICAgcGFzcyAjIEdpdmVuIGRhdGEgaXMgYWx3YXlzIGltbWVkaWF0ZWx5IHdyaXR0ZW5cbiAgICAgICAgb25fd3JpdGUgPSBsYW1iZGEgZDogc2VsZi5tZXNzYWdlKGQpXG4gICAgICAgIHN5cy5zdGRvdXQgPSBfX091dHB1dFdyaXRlcihcIm91dHB1dFwiLCBvbl93cml0ZSlcbiAgICAgICAgc3lzLnN0ZGVyciA9IF9fT3V0cHV0V3JpdGVyKFwiZXJyb3JcIiwgb25fd3JpdGUpXG5cbiAgICBkZWYgcmVhZGxpbmUoc2VsZiwgbj0tMSwgcHJvbXB0PVwiXCIpOlxuICAgICAgICBpZiBub3Qgc2VsZi5saW5lOlxuICAgICAgICAgICAgc2VsZi5saW5lID0gc2VsZi5tZXNzYWdlKGRpY3QodHlwZT1cImlucHV0XCIsIGRhdGE9cHJvbXB0KSkgKyBcIlxcXFxuXCJcbiAgICAgICAgaWYgbiA8IDAgb3IgbiA+IGxlbihzZWxmLmxpbmUpOlxuICAgICAgICAgICAgbiA9IGxlbihzZWxmLmxpbmUpXG4gICAgICAgIHRvX3JldHVybiA9IHNlbGYubGluZVswOm5dXG4gICAgICAgIHNlbGYubGluZSA9IHNlbGYubGluZVtuOl1cbiAgICAgICAgcmV0dXJuIHRvX3JldHVyblxuXG4gICAgZGVmIG92ZXJyaWRlX2lucHV0KHNlbGYpOlxuICAgICAgICBnbG9iYWwgaW5wdXRcbiAgICAgICAgaW5wdXQgPSBsYW1iZGEgcHJvbXB0PVwiXCI6IHNlbGYucmVhZGxpbmUocHJvbXB0PXByb21wdClbOi0xXSAjIFJlbW92ZSBuZXdsaW5lXG5cbiAgICAgICAgc3lzLnN0ZGluLnJlYWRsaW5lID0gc2VsZi5yZWFkbGluZVxuXG5kZWYgY2xlYW5fdHJhY2ViYWNrKHRiLCBmaWxlbmFtZSk6XG4gICAgIyBGb3Igc29tZSByZWFzb24gdGhlIGZpcnN0IGNoYXJhY3RlciBvZiBfX2ZpbGVfXyBpcyBsb3N0IGluIGZyaWVuZGx5X3RyYWNlYmFja1xuICAgIGZvciBwcmVmaXggaW4gW1wiXFxcXFwiXCIsIFwiXFxcXCdcIiwgXCIgXCJdOlxuICAgICAgICB0YiA9IHRiLnJlcGxhY2UocHJlZml4ICsgZmlsZW5hbWVbMTpdLCBwcmVmaXggKyBmaWxlbmFtZSlcbiAgICByZXR1cm4gaHRtbC5lc2NhcGUodGIpXG5cbmRlZiBmb3JtYXRfZXhjZXB0aW9uKGZpbGVuYW1lLCBleGMpOlxuICAgIGZyID0gRnJpZW5kbHlUcmFjZWJhY2sodHlwZShleGMpLCBleGMsIGV4Yy5fX3RyYWNlYmFja19fKVxuICAgIGZyLmFzc2lnbl9nZW5lcmljKClcbiAgICBmci5hc3NpZ25fY2F1c2UoKVxuICAgIHRiID0gZnIuaW5mby5nZXQoXCJzaW11bGF0ZWRfcHl0aG9uX3RyYWNlYmFja1wiLCBcIk5vIHRyYWNlYmFja1wiKVxuICAgIGluZm8gPSBmci5pbmZvLmdldChcImdlbmVyaWNcIiwgXCJObyBpbmZvcm1hdGlvbiBhdmFpbGFibGUuXCIpXG4gICAgd2h5ID0gZnIuaW5mby5nZXQoXCJjYXVzZVwiLCBcIlVua25vd24gY2F1c2VcIilcbiAgICBzdWdnZXN0aW9ucyA9IGZyLmluZm8uZ2V0KFwic3VnZ2VzdFwiLCBcIk5vIHN1Z2dlc3Rpb25zXCIpXG4gICAgd2hhdCA9IGZyLmluZm8uZ2V0KFwibWVzc2FnZVwiLCBcIk5vIG1lc3NhZ2VcIilcbiAgICB1c2VyX3N0YXJ0ID0gMFxuICAgIHRiX2xpbmVzID0gdGIuc3BsaXQoXCJcXFxcblwiKVxuICAgIHdoaWxlIHVzZXJfc3RhcnQgPCBsZW4odGJfbGluZXMpIGFuZCBmaWxlbmFtZSBub3QgaW4gdGJfbGluZXNbdXNlcl9zdGFydF06XG4gICAgICAgIHVzZXJfc3RhcnQgKz0gMVxuICAgIG5hbWUgPSB0eXBlKGV4YykuX19uYW1lX19cbiAgICB1c2VyX2VuZCA9IHVzZXJfc3RhcnQgKyAxXG4gICAgd2hpbGUgdXNlcl9lbmQgPCBsZW4odGJfbGluZXMpIGFuZCBuYW1lIG5vdCBpbiB0Yl9saW5lc1t1c2VyX2VuZF06XG4gICAgICAgIHVzZXJfZW5kICs9IDFcbiAgICB3aGVyZSA9IFwiXFxcXG5cIi5qb2luKHRiX2xpbmVzW3VzZXJfc3RhcnQ6dXNlcl9lbmRdKSBvciBcIk5vIGxvY2F0aW9uXCJcbiAgICByZXR1cm4ganNvbi5kdW1wcyhcbiAgICAgICAgZGljdChcbiAgICAgICAgICAgIG5hbWU9bmFtZSxcbiAgICAgICAgICAgIHRyYWNlYmFjaz10YixcbiAgICAgICAgICAgIGluZm89aW5mbyxcbiAgICAgICAgICAgIHdoeT13aHksXG4gICAgICAgICAgICB3aGVyZT13aGVyZSxcbiAgICAgICAgICAgIHdoYXQ9d2hhdCxcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zPXN1Z2dlc3Rpb25zXG4gICAgICAgIClcbiAgICApXG5cbmRlZiAke0lOSVRJQUxJWkVfUFlUSE9OX0JBQ0tFTkR9KGNiKTpcbiAgICBnbG9iYWxzKClbXCJfX25hbWVfX1wiXSA9IFwiX19tYWluX19cIlxuICAgIGdsb2JhbCBfX3BhcHlyb3NcbiAgICBfX3BhcHlyb3MgPSBfX1BhcHlyb3MoY2IpXG5cbmFzeW5jIGRlZiAke1BST0NFU1NfUFlUSE9OX0NPREV9KGNvZGUsIHJ1biwgZmlsZW5hbWU9XCJteV9jb2RlLnB5XCIpOlxuICAgIHdpdGggb3BlbihmaWxlbmFtZSwgXCJ3XCIpIGFzIGY6XG4gICAgICAgIGYud3JpdGUoY29kZSlcbiAgICBnbG9iYWxzKClbXCJfX2ZpbGVfX1wiXSA9IGZpbGVuYW1lXG4gICAgdHJ5OlxuICAgICAgICBpZiBydW46XG4gICAgICAgICAgICBhd2FpdCBldmFsX2NvZGVfYXN5bmMoY29kZSwgZ2xvYmFscygpLCBmaWxlbmFtZT1maWxlbmFtZSlcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIGNvbXBpbGUoY29kZSwgZmlsZW5hbWUsIG1vZGU9XCJleGVjXCIsIGZsYWdzPWFzdC5QeUNGX0FMTE9XX1RPUF9MRVZFTF9BV0FJVClcbiAgICAgICAgcmV0dXJuIFRydWVcbiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6XG4gICAgICAgIGdsb2JhbCBfX3BhcHlyb3NcbiAgICAgICAgX19wYXB5cm9zLm1lc3NhZ2UoZGljdCh0eXBlPVwiZXJyb3JcIiwgZGF0YT1mb3JtYXRfZXhjZXB0aW9uKGZpbGVuYW1lLCBlKSkpXG4gICAgICAgIHJldHVybiBGYWxzZVxuXG5gO1xuIiwiaW1wb3J0IHsgZXhwb3NlIH0gZnJvbSBcImNvbWxpbmtcIjtcbmltcG9ydCB7IEJhY2tlbmQgfSBmcm9tIFwiLi4vLi4vQmFja2VuZFwiO1xuaW1wb3J0IHsgUGFweXJvc0V2ZW50IH0gZnJvbSBcIi4uLy4uL1BhcHlyb3NFdmVudFwiO1xuaW1wb3J0IHsgSU5JVElBTElaQVRJT05fQ09ERSwgSU5JVElBTElaRV9QWVRIT05fQkFDS0VORCwgUFJPQ0VTU19QWVRIT05fQ09ERSB9IGZyb20gXCIuL2luaXQucHlcIjtcblxuaW50ZXJmYWNlIFB5b2RpZGUge1xuICAgIHJ1blB5dGhvbjogKGNvZGU6IHN0cmluZywgZ2xvYmFscz86IGFueSkgPT4gYW55O1xuICAgIHJ1blB5dGhvbkFzeW5jOiAoY29kZTogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+O1xuICAgIGxvYWRQYWNrYWdlc0Zyb21JbXBvcnRzOiAoY29kZTogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+O1xuICAgIGdsb2JhbHM6IE1hcDxzdHJpbmcsIGFueT47XG59XG5kZWNsYXJlIGZ1bmN0aW9uIGltcG9ydFNjcmlwdHMoLi4udXJsczogc3RyaW5nW10pOiB2b2lkO1xuZGVjbGFyZSBmdW5jdGlvbiBsb2FkUHlvZGlkZShhcmdzOiB7IGluZGV4VVJMOiBzdHJpbmc7IGZ1bGxTdGRMaWI6IGJvb2xlYW4gfSk6IFByb21pc2U8UHlvZGlkZT47XG5cbmltcG9ydFNjcmlwdHMoXCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvcHlvZGlkZS92MC4xOC4xL2Z1bGwvcHlvZGlkZS5qc1wiKTtcblxuXG5jbGFzcyBQeXRob25Xb3JrZXIgZXh0ZW5kcyBCYWNrZW5kIHtcbiAgICBweW9kaWRlOiBQeW9kaWRlO1xuICAgIGluaXRpYWxpemVkOiBib29sZWFuO1xuICAgIGdsb2JhbHM6IE1hcDxzdHJpbmcsIGFueT47XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5weW9kaWRlID0ge30gYXMgUHlvZGlkZTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmdsb2JhbHMgPSBuZXcgTWFwKCk7XG4gICAgfVxuXG4gICAgb3ZlcnJpZGUgYXN5bmMgbGF1bmNoKG9uRXZlbnQ6IChlOiBQYXB5cm9zRXZlbnQpID0+IHZvaWQsXG4gICAgICAgIGlucHV0VGV4dEFycmF5PzogVWludDhBcnJheSwgaW5wdXRNZXRhRGF0YT86IEludDMyQXJyYXkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgc3VwZXIubGF1bmNoKG9uRXZlbnQsIGlucHV0VGV4dEFycmF5LCBpbnB1dE1ldGFEYXRhKTtcbiAgICAgICAgdGhpcy5weW9kaWRlID0gYXdhaXQgbG9hZFB5b2RpZGUoe1xuICAgICAgICAgICAgaW5kZXhVUkw6IFwiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L3B5b2RpZGUvdjAuMTguMS9mdWxsL1wiLFxuICAgICAgICAgICAgZnVsbFN0ZExpYjogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMucnVuQ29kZShJTklUSUFMSVpBVElPTl9DT0RFLCAwKTtcbiAgICAgICAgLy8gUHl0aG9uIGNhbGxzIG91ciBmdW5jdGlvbiB3aXRoIGEgZGljdCwgd2hpY2ggbXVzdCBiZSBjb252ZXJ0ZWQgdG8gYSBQYXB5cm9zRXZlbnRcbiAgICAgICAgY29uc3QgZXZlbnRDYWxsYmFjayA9IChkYXRhOiBhbnkpOiB2b2lkID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGpzRXZlbnQ6IFBhcHlyb3NFdmVudCA9IFwidG9Kc1wiIGluIGRhdGEgPyBkYXRhLnRvSnMoKSA6IE9iamVjdC5mcm9tRW50cmllcyhkYXRhKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uRXZlbnQoanNFdmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucHlvZGlkZS5nbG9iYWxzLmdldChJTklUSUFMSVpFX1BZVEhPTl9CQUNLRU5EKShldmVudENhbGxiYWNrKTtcbiAgICAgICAgdGhpcy5nbG9iYWxzID0gbmV3IE1hcCgodGhpcy5weW9kaWRlLmdsb2JhbHMgYXMgYW55KS50b0pzKCkpO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBfY2xlYW5TY29wZSgpOiB2b2lkIHtcbiAgICAgICAgLy8gRmluZCB0aGUgbmV3bHkgYWRkZWQgZ2xvYmFsc1xuICAgICAgICBjb25zdCBweW9kaWRlR2xvYmFscyA9IHRoaXMucHlvZGlkZS5nbG9iYWxzO1xuICAgICAgICBjb25zdCBrZXlzVG9SZW1vdmU6IEFycmF5PHN0cmluZz4gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgcHlvZGlkZUdsb2JhbHMua2V5cygpKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZ2xvYmFscy5oYXMoa2V5KSkge1xuICAgICAgICAgICAgICAgIGtleXNUb1JlbW92ZS5wdXNoKGtleSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFJlc2V0IHZhbHVlIGluIGNhc2UgaXQgd2FzIG92ZXJyaWRlblxuICAgICAgICAgICAgICAgIHB5b2RpZGVHbG9iYWxzLnNldChrZXksIHRoaXMuZ2xvYmFscy5nZXQoa2V5KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVtb3ZlIHRoZW0gZnJvbSB0aGUgYWN0dWFsIGdsb2JhbHNcbiAgICAgICAgLy8gU2VwYXJhdGUgcnVucyBvZiBjb2RlIHNob3VsZCBub3QgYmUgYWJsZSB0byBhY2Nlc3MgdmFyaWFibGVzL2Z1bmN0aW9uc1xuICAgICAgICAvLyB0aGF0IHdlcmUgZGVmaW5lZCBlYXJsaWVyIG9uLCBhcyB0aGlzIGNvdWxkIGNhdXNlIG5vbi1vYnZpb3VzIGJ1Z3NcbiAgICAgICAga2V5c1RvUmVtb3ZlLmZvckVhY2goayA9PiBweW9kaWRlR2xvYmFscy5kZWxldGUoaykpO1xuICAgIH1cblxuICAgIG92ZXJyaWRlIGFzeW5jIF9ydW5Db2RlSW50ZXJuYWwoY29kZTogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgaWYgKHRoaXMuaW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIC8vIHJ1biB0aGUgY29kZSwgcG90ZW50aWFsbHkgcG9sbHV0aW5nIHRoZSBuYW1lc3BhY2VcbiAgICAgICAgICAgIC8vIEZ1bmN0aW9ucyBhbmQgdmFyaWFibGVzIGRlZmluZWQgYnkgdGhlIHVzZXIgYmVjb21lIGdsb2JhbFxuICAgICAgICAgICAgLy8gV2UgbmVlZCB0aGVtIHRvIGJlIGdsb2JhbCB0byBsZXQgZG9jdGVzdCB3b3JrIG91dCBvZiB0aGUgYm94XG4gICAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5weW9kaWRlLmdsb2JhbHMuZ2V0KFBST0NFU1NfUFlUSE9OX0NPREUpKGNvZGUsIGZhbHNlKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucHlvZGlkZS5sb2FkUGFja2FnZXNGcm9tSW1wb3J0cyhjb2RlKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnB5b2RpZGUuZ2xvYmFscy5nZXQoUFJPQ0VTU19QWVRIT05fQ09ERSkoY29kZSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDbGVhbnVwIHRoZSBzY29wZSBhZnRlciBjb21wdXRhdGlvbnMgYXJlIGRvbmVcbiAgICAgICAgICAgIC8vIEV2ZW4gaW4gY2FzZSBvZiBlcnJvcnNcbiAgICAgICAgICAgIHRoaXMuX2NsZWFuU2NvcGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucHlvZGlkZS5sb2FkUGFja2FnZXNGcm9tSW1wb3J0cyhjb2RlKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnB5b2RpZGUucnVuUHl0aG9uQXN5bmMoY29kZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9zZShuZXcgUHl0aG9uV29ya2VyKCkpO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4vLyB0aGUgc3RhcnR1cCBmdW5jdGlvblxuX193ZWJwYWNrX3JlcXVpcmVfXy54ID0gKCkgPT4ge1xuXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcblx0Ly8gVGhpcyBlbnRyeSBtb2R1bGUgZGVwZW5kcyBvbiBvdGhlciBsb2FkZWQgY2h1bmtzIGFuZCBleGVjdXRpb24gbmVlZCB0byBiZSBkZWxheWVkXG5cdHZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHVuZGVmaW5lZCwgWzExNF0sICgpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fKDU3MikpKVxuXHRfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKF9fd2VicGFja19leHBvcnRzX18pO1xuXHRyZXR1cm4gX193ZWJwYWNrX2V4cG9ydHNfXztcbn07XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZiA9IHt9O1xuLy8gVGhpcyBmaWxlIGNvbnRhaW5zIG9ubHkgdGhlIGVudHJ5IGNodW5rLlxuLy8gVGhlIGNodW5rIGxvYWRpbmcgZnVuY3Rpb24gZm9yIGFkZGl0aW9uYWwgY2h1bmtzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmUgPSAoY2h1bmtJZCkgPT4ge1xuXHRyZXR1cm4gUHJvbWlzZS5hbGwoT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5mKS5yZWR1Y2UoKHByb21pc2VzLCBrZXkpID0+IHtcblx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmZba2V5XShjaHVua0lkLCBwcm9taXNlcyk7XG5cdFx0cmV0dXJuIHByb21pc2VzO1xuXHR9LCBbXSkpO1xufTsiLCIvLyBUaGlzIGZ1bmN0aW9uIGFsbG93IHRvIHJlZmVyZW5jZSBhc3luYyBjaHVua3MgYW5kIHNpYmxpbmcgY2h1bmtzIGZvciB0aGUgZW50cnlwb2ludFxuX193ZWJwYWNrX3JlcXVpcmVfXy51ID0gKGNodW5rSWQpID0+IHtcblx0Ly8gcmV0dXJuIHVybCBmb3IgZmlsZW5hbWVzIGJhc2VkIG9uIHRlbXBsYXRlXG5cdHJldHVybiBcIlwiICsgY2h1bmtJZCArIFwiLmJ1bmRsZS5qc1wiO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmNcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSBzY3JpcHRVcmwgPSBzY3JpcHRzW3NjcmlwdHMubGVuZ3RoIC0gMV0uc3JjXG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsIi8vIG5vIGJhc2VVUklcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBjaHVua3Ncbi8vIFwiMVwiIG1lYW5zIFwiYWxyZWFkeSBsb2FkZWRcIlxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0NTcyOiAxXG59O1xuXG4vLyBpbXBvcnRTY3JpcHRzIGNodW5rIGxvYWRpbmdcbnZhciBpbnN0YWxsQ2h1bmsgPSAoZGF0YSkgPT4ge1xuXHR2YXIgW2NodW5rSWRzLCBtb3JlTW9kdWxlcywgcnVudGltZV0gPSBkYXRhO1xuXHRmb3IodmFyIG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0fVxuXHR9XG5cdGlmKHJ1bnRpbWUpIHJ1bnRpbWUoX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cdHdoaWxlKGNodW5rSWRzLmxlbmd0aClcblx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZHMucG9wKCldID0gMTtcblx0cGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG59O1xuX193ZWJwYWNrX3JlcXVpcmVfXy5mLmkgPSAoY2h1bmtJZCwgcHJvbWlzZXMpID0+IHtcblx0Ly8gXCIxXCIgaXMgdGhlIHNpZ25hbCBmb3IgXCJhbHJlYWR5IGxvYWRlZFwiXG5cdGlmKCFpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcblx0XHRpZih0cnVlKSB7IC8vIGFsbCBjaHVua3MgaGF2ZSBKU1xuXHRcdFx0aW1wb3J0U2NyaXB0cyhfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBfX3dlYnBhY2tfcmVxdWlyZV9fLnUoY2h1bmtJZCkpO1xuXHRcdH1cblx0fVxufTtcblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmtwYXB5cm9zXCJdID0gc2VsZltcIndlYnBhY2tDaHVua3BhcHlyb3NcIl0gfHwgW107XG52YXIgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24gPSBjaHVua0xvYWRpbmdHbG9iYWwucHVzaC5iaW5kKGNodW5rTG9hZGluZ0dsb2JhbCk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IGluc3RhbGxDaHVuaztcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdCIsIi8vIHJ1biBzdGFydHVwXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18ueCgpO1xuIl0sIm5hbWVzIjpbImRlZmVycmVkIiwibmV4dCIsIklOSVRJQUxJWkVfUFlUSE9OX0JBQ0tFTkQiLCJQUk9DRVNTX1BZVEhPTl9DT0RFIiwiSU5JVElBTElaQVRJT05fQ09ERSIsImltcG9ydFNjcmlwdHMiLCJweW9kaWRlIiwiaW5pdGlhbGl6ZWQiLCJnbG9iYWxzIiwiTWFwIiwibGF1bmNoIiwib25FdmVudCIsImlucHV0VGV4dEFycmF5IiwiaW5wdXRNZXRhRGF0YSIsInRoaXMiLCJsb2FkUHlvZGlkZSIsImluZGV4VVJMIiwiZnVsbFN0ZExpYiIsInJ1bkNvZGUiLCJldmVudENhbGxiYWNrIiwiZGF0YSIsImpzRXZlbnQiLCJ0b0pzIiwiT2JqZWN0IiwiZnJvbUVudHJpZXMiLCJnZXQiLCJfY2xlYW5TY29wZSIsInB5b2RpZGVHbG9iYWxzIiwia2V5c1RvUmVtb3ZlIiwia2V5cyIsImtleSIsImhhcyIsInNldCIsInB1c2giLCJmb3JFYWNoIiwiayIsImRlbGV0ZSIsIl9ydW5Db2RlSW50ZXJuYWwiLCJjb2RlIiwibG9hZFBhY2thZ2VzRnJvbUltcG9ydHMiLCJydW5QeXRob25Bc3luYyIsIkJhY2tlbmQiLCJQeXRob25Xb3JrZXIiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm0iLCJ4IiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsIk8iLCJyZXN1bHQiLCJjaHVua0lkcyIsImZuIiwicHJpb3JpdHkiLCJub3RGdWxmaWxsZWQiLCJJbmZpbml0eSIsImkiLCJsZW5ndGgiLCJmdWxmaWxsZWQiLCJqIiwiZXZlcnkiLCJzcGxpY2UiLCJyIiwiZCIsImRlZmluaXRpb24iLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZiIsImUiLCJjaHVua0lkIiwiUHJvbWlzZSIsImFsbCIsInJlZHVjZSIsInByb21pc2VzIiwidSIsImciLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJ3aW5kb3ciLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwic2NyaXB0VXJsIiwibG9jYXRpb24iLCJkb2N1bWVudCIsImN1cnJlbnRTY3JpcHQiLCJzcmMiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJFcnJvciIsInJlcGxhY2UiLCJwIiwiaW5zdGFsbGVkQ2h1bmtzIiwiY2h1bmtMb2FkaW5nR2xvYmFsIiwic2VsZiIsInBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uIiwiYmluZCIsIm1vcmVNb2R1bGVzIiwicnVudGltZSIsInBvcCIsInRoZW4iXSwic291cmNlUm9vdCI6IiJ9