"use strict";(self.webpackChunkpapyros=self.webpackChunkpapyros||[]).push([[114],{872:(e,t,n)=>{var r;n.d(t,{z:()=>c}),function(e){e.Python="Python",e.JavaScript="JavaScript"}(r||(r={})),r.Python,r.JavaScript,new Map([["python",r.Python],["javascript",r.JavaScript]]),r.Python;var a,o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},i=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};function s(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e!==a.Debug;r&&(e===a.Error?console.error.apply(console,i([],o(t),!1)):console.log.apply(console,i([],o(t),!1)))}!function(e){e[e.Debug=0]="Debug",e[e.Error=1]="Error",e[e.Important=2]="Important"}(a||(a={}));var c=function(){function e(){this.onEvent=function(){},this.runId=0}return e.prototype.launch=function(e,t,n){var r=this,a=function(e,t){if(e&&t){var n=new TextDecoder;return function(){for(;"timed-out"===Atomics.wait(t,0,0,100););Atomics.store(t,0,0);var r=Atomics.exchange(t,1,0),a=e.slice(0,r);return n.decode(a)}}return function(){var e=new XMLHttpRequest;do{e.open("GET","/__papyros_input",!1),e.send(null)}while(e.status>=400);return e.responseText}}(t,n);return this.onEvent=function(t){if(t.runId=r.runId,e(t),"input"===t.type)return a()},Promise.resolve()},e.prototype.runCode=function(e,t){return n=this,r=void 0,i=function(){var n,r,o;return function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(i){switch(i.label){case 0:this.runId=t,s(a.Debug,"Running code in worker: ",e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._runCodeInternal(e)];case 2:return n=i.sent(),s(a.Important,"ran code: "+e+" and received: ",n),[2,this.onEvent({type:"success",data:JSON.stringify(n),runId:t})];case 3:return r=i.sent(),o="string"!=typeof r&&"toString"in r?r.toString():JSON.stringify(r),s(a.Error,"Error during execution: ",r,o),[2,this.onEvent({type:"error",data:o,runId:t})];case 4:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{c(i.next(e))}catch(e){t(e)}}function s(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}c((i=i.apply(n,r||[])).next())}));var n,r,o,i},e}()},375:(e,t,n)=>{n.d(t,{Jj:()=>u});const r=Symbol("Comlink.proxy"),a=Symbol("Comlink.endpoint"),o=Symbol("Comlink.releaseProxy"),i=Symbol("Comlink.thrown"),s=e=>"object"==typeof e&&null!==e||"function"==typeof e,c=new Map([["proxy",{canHandle:e=>s(e)&&e[r],serialize(e){const{port1:t,port2:n}=new MessageChannel;return u(e,t),[n,[n]]},deserialize:e=>(e.start(),f(e,[],undefined))}],["throw",{canHandle:e=>s(e)&&i in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function u(e,t=self){t.addEventListener("message",(function n(a){if(!a||!a.data)return;const{id:o,type:s,path:c}=Object.assign({path:[]},a.data),p=(a.data.argumentList||[]).map(v);let f;try{const t=c.slice(0,-1).reduce(((e,t)=>e[t]),e),n=c.reduce(((e,t)=>e[t]),e);switch(s){case"GET":f=n;break;case"SET":t[c.slice(-1)[0]]=v(a.data.value),f=!0;break;case"APPLY":f=n.apply(t,p);break;case"CONSTRUCT":f=function(e){return Object.assign(e,{[r]:!0})}(new n(...p));break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;u(e,n),f=function(e,t){return y.set(e,t),e}(t,[t])}break;case"RELEASE":f=void 0;break;default:return}}catch(e){f={value:e,[i]:0}}Promise.resolve(f).catch((e=>({value:e,[i]:0}))).then((e=>{const[r,a]=d(e);t.postMessage(Object.assign(Object.assign({},r),{id:o}),a),"RELEASE"===s&&(t.removeEventListener("message",n),l(t))}))})),t.start&&t.start()}function l(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function p(e){if(e)throw new Error("Proxy has been released and is not useable")}function f(e,t=[],n=function(){}){let r=!1;const i=new Proxy(n,{get(n,a){if(p(r),a===o)return()=>m(e,{type:"RELEASE",path:t.map((e=>e.toString()))}).then((()=>{l(e),r=!0}));if("then"===a){if(0===t.length)return{then:()=>i};const n=m(e,{type:"GET",path:t.map((e=>e.toString()))}).then(v);return n.then.bind(n)}return f(e,[...t,a])},set(n,a,o){p(r);const[i,s]=d(o);return m(e,{type:"SET",path:[...t,a].map((e=>e.toString())),value:i},s).then(v)},apply(n,o,i){p(r);const s=t[t.length-1];if(s===a)return m(e,{type:"ENDPOINT"}).then(v);if("bind"===s)return f(e,t.slice(0,-1));const[c,u]=h(i);return m(e,{type:"APPLY",path:t.map((e=>e.toString())),argumentList:c},u).then(v)},construct(n,a){p(r);const[o,i]=h(a);return m(e,{type:"CONSTRUCT",path:t.map((e=>e.toString())),argumentList:o},i).then(v)}});return i}function h(e){const t=e.map(d);return[t.map((e=>e[0])),(n=t.map((e=>e[1])),Array.prototype.concat.apply([],n))];var n}const y=new WeakMap;function d(e){for(const[t,n]of c)if(n.canHandle(e)){const[r,a]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},a]}return[{type:"RAW",value:e},y.get(e)||[]]}function v(e){switch(e.type){case"HANDLER":return c.get(e.name).deserialize(e.value);case"RAW":return e.value}}function m(e,t,n){return new Promise((r=>{const a=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===a&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),n)}))}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNQSxPQUd6QixTQUFTZ0QsRUFBdUJ4QyxFQUFJMkQsRUFBSzFDLEdBQ3JDLE9BQU8sSUFBSXhELFNBQVNDLElBQ2hCLE1BQU0yQyxFQWVILElBQUlnRCxNQUFNLEdBQ1pPLEtBQUssR0FDTHBELEtBQUksSUFBTXFELEtBQUtDLE1BQU1ELEtBQUtFLFNBQVdDLE9BQU9DLGtCQUFrQjlGLFNBQVMsTUFDdkUrRixLQUFLLEtBakJObEUsRUFBR0UsaUJBQWlCLFdBQVcsU0FBU2lFLEVBQUUvRCxHQUNqQ0EsRUFBR3RDLE1BQVNzQyxFQUFHdEMsS0FBS3VDLElBQU1ELEVBQUd0QyxLQUFLdUMsS0FBT0EsSUFHOUNMLEVBQUc0QixvQkFBb0IsVUFBV3VDLEdBQ2xDekcsRUFBUTBDLEVBQUd0QyxVQUVYa0MsRUFBR1gsT0FDSFcsRUFBR1gsUUFFUFcsRUFBRzJCLFlBQVk3QixPQUFPQyxPQUFPLENBQUVNLEdBQUFBLEdBQU1zRCxHQUFNMUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYXB5cm9zLy4vc3JjL1Byb2dyYW1taW5nTGFuZ3VhZ2UudHMiLCJ3ZWJwYWNrOi8vcGFweXJvcy8uL3NyYy9Db25zdGFudHMudHMiLCJ3ZWJwYWNrOi8vcGFweXJvcy8uL3NyYy91dGlsL0xvZ2dpbmcudHMiLCJ3ZWJwYWNrOi8vcGFweXJvcy8uL3NyYy9CYWNrZW5kLnRzIiwid2VicGFjazovL3BhcHlyb3MvLi9ub2RlX21vZHVsZXMvY29tbGluay9kaXN0L2VzbS9jb21saW5rLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZW51bSBQcm9ncmFtbWluZ0xhbmd1YWdlIHtcbiAgICBQeXRob24gPSBcIlB5dGhvblwiLFxuICAgIEphdmFTY3JpcHQgPSBcIkphdmFTY3JpcHRcIlxufVxuXG5leHBvcnQgY29uc3QgUFJPR1JBTU1JTkdfTEFOR1VBR0VTID0gW1xuICAgIFByb2dyYW1taW5nTGFuZ3VhZ2UuUHl0aG9uLFxuICAgIFByb2dyYW1taW5nTGFuZ3VhZ2UuSmF2YVNjcmlwdFxuXTtcblxuY29uc3QgTEFOR1VBR0VfTUFQID0gbmV3IE1hcChbXG4gICAgW1wicHl0aG9uXCIsIFByb2dyYW1taW5nTGFuZ3VhZ2UuUHl0aG9uXSxcbiAgICBbXCJqYXZhc2NyaXB0XCIsIFByb2dyYW1taW5nTGFuZ3VhZ2UuSmF2YVNjcmlwdF1cbl0pO1xuXG5leHBvcnQgZnVuY3Rpb24gcGxGcm9tU3RyaW5nKGxhbmd1YWdlOiBzdHJpbmcpOiBQcm9ncmFtbWluZ0xhbmd1YWdlIHtcbiAgICBjb25zdCBsYW5nTEMgPSBsYW5ndWFnZS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChMQU5HVUFHRV9NQVAuaGFzKGxhbmdMQykpIHtcbiAgICAgICAgcmV0dXJuIExBTkdVQUdFX01BUC5nZXQobGFuZ0xDKSE7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBsYW5ndWFnZTogJHtsYW5ndWFnZX1gKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBQcm9ncmFtbWluZ0xhbmd1YWdlIH0gZnJvbSBcIi4vUHJvZ3JhbW1pbmdMYW5ndWFnZVwiO1xuXG5leHBvcnQgY29uc3QgTUFJTl9BUFBfSUQgPSBcInBhcHlyb3NcIjtcblxuZXhwb3J0IGNvbnN0IE9VVFBVVF9UQV9JRCA9IFwiY29kZS1vdXRwdXQtYXJlYVwiO1xuZXhwb3J0IGNvbnN0IElOUFVUX0FSRUFfV1JBUFBFUl9JRCA9IFwiY29kZS1pbnB1dC1hcmVhLXdyYXBwZXJcIjtcbmV4cG9ydCBjb25zdCBJTlBVVF9UQV9JRCA9IFwiY29kZS1pbnB1dC1hcmVhXCI7XG5leHBvcnQgY29uc3QgRURJVE9SX1dSQVBQRVJfSUQgPSBcImNvZGUtYXJlYVwiO1xuXG5leHBvcnQgY29uc3QgU1RBVEVfU1BJTk5FUl9JRCA9IFwic3RhdGUtc3Bpbm5lclwiO1xuZXhwb3J0IGNvbnN0IEFQUExJQ0FUSU9OX1NUQVRFX1RFWFRfSUQgPSBcImFwcGxpY2F0aW9uLXN0YXRlLXRleHRcIjtcblxuZXhwb3J0IGNvbnN0IFJVTl9CVE5fSUQgPSBcInJ1bi1jb2RlLWJ0blwiO1xuZXhwb3J0IGNvbnN0IFNUT1BfQlROX0lEID0gXCJzdG9wLWJ0blwiO1xuZXhwb3J0IGNvbnN0IFNFTkRfSU5QVVRfQlROX0lEID0gXCJzZW5kLWlucHV0LWJ0blwiO1xuZXhwb3J0IGNvbnN0IFNXSVRDSF9JTlBVVF9NT0RFX0FfSUQgPSBcInN3aXRjaC1pbnB1dC1tb2RlXCI7XG5cbmV4cG9ydCBjb25zdCBQUk9HUkFNTUlOR19MQU5HVUFHRV9TRUxFQ1RfSUQgPSBcInByb2dyYW1taW5nLWxhbmd1YWdlLXNlbGVjdFwiO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfUFJPR1JBTU1JTkdfTEFOR1VBR0UgPSBQcm9ncmFtbWluZ0xhbmd1YWdlLlB5dGhvbjtcbmV4cG9ydCBjb25zdCBFWEFNUExFX1NFTEVDVF9JRCA9IFwiZXhhbXBsZS1zZWxlY3RcIjtcblxuZXhwb3J0IGNvbnN0IExPQ0FMRV9TRUxFQ1RfSUQgPSBcImxvY2FsZS1zZWxlY3RcIjtcbmV4cG9ydCBjb25zdCBERUZBVUxUX0xPQ0FMRSA9IFwibmxcIjtcblxuZXhwb3J0IGNvbnN0IElOUFVUX1JFTEFUSVZFX1VSTCA9IFwiL19fcGFweXJvc19pbnB1dFwiO1xuXG4iLCJleHBvcnQgZW51bSBMb2dUeXBlIHtcbiAgICBEZWJ1ZywgRXJyb3IsIEltcG9ydGFudFxufVxuXG5jb25zdCBFTlZJUk9OTUVOVDogc3RyaW5nID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgfHwgXCJkZXZlbG9wbWVudFwiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcHlyb3NMb2cobG9nVHlwZTogTG9nVHlwZSwgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICBjb25zdCBkb0xvZyA9IEVOVklST05NRU5UICE9PSBcInByb2R1Y3Rpb25cIiB8fCBsb2dUeXBlICE9PSBMb2dUeXBlLkRlYnVnO1xuICAgIGlmIChkb0xvZykge1xuICAgICAgICBpZiAobG9nVHlwZSA9PT0gTG9nVHlwZS5FcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvciguLi5hcmdzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKC4uLmFyZ3MpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgSU5QVVRfUkVMQVRJVkVfVVJMIH0gZnJvbSBcIi4vQ29uc3RhbnRzXCI7XG5pbXBvcnQgeyBQYXB5cm9zRXZlbnQgfSBmcm9tIFwiLi9QYXB5cm9zRXZlbnRcIjtcbmltcG9ydCB7IExvZ1R5cGUsIHBhcHlyb3NMb2cgfSBmcm9tIFwiLi91dGlsL0xvZ2dpbmdcIjtcblxuZnVuY3Rpb24gZ2V0SW5wdXRDYWxsYmFjayhpbnB1dFRleHRBcnJheT86IFVpbnQ4QXJyYXksIGlucHV0TWV0YURhdGE/OiBJbnQzMkFycmF5KTogKCkgPT4gc3RyaW5nIHtcbiAgICBpZiAoaW5wdXRUZXh0QXJyYXkgJiYgaW5wdXRNZXRhRGF0YSkge1xuICAgICAgICBjb25zdCB0ZXh0RGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnN0YW50LWNvbmRpdGlvblxuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoQXRvbWljcy53YWl0KGlucHV0TWV0YURhdGEsIDAsIDAsIDEwMCkgPT09IFwidGltZWQtb3V0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcGFweXJvc0xvZy5sb2coXCJ3YWl0aW5nIG9uIGlucHV0XCIpO1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiAoaW50ZXJydXB0QnVmZmVyWzBdID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEF0b21pY3Muc3RvcmUoaW5wdXRNZXRhRGF0YSwgMCwgMCk7XG4gICAgICAgICAgICBjb25zdCBzaXplID0gQXRvbWljcy5leGNoYW5nZShpbnB1dE1ldGFEYXRhLCAxLCAwKTtcbiAgICAgICAgICAgIGNvbnN0IGJ5dGVzID0gaW5wdXRUZXh0QXJyYXkuc2xpY2UoMCwgc2l6ZSk7XG4gICAgICAgICAgICByZXR1cm4gdGV4dERlY29kZXIuZGVjb2RlKGJ5dGVzKTtcbiAgICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIC8vIGBmYWxzZWAgbWFrZXMgdGhlIHJlcXVlc3Qgc3luY2hyb25vdXNcbiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9wZW4oXCJHRVRcIiwgSU5QVVRfUkVMQVRJVkVfVVJMLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgcmVxdWVzdC5zZW5kKG51bGwpO1xuICAgICAgICAgICAgfSB3aGlsZSAocmVxdWVzdC5zdGF0dXMgPj0gNDAwKTsgLy8gdG9kbyBiZXR0ZXIgZXJyb3IgaGFuZGxpbmdcbiAgICAgICAgICAgIHJldHVybiByZXF1ZXN0LnJlc3BvbnNlVGV4dDtcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYWNrZW5kIHtcbiAgICBvbkV2ZW50OiAoZTogUGFweXJvc0V2ZW50KSA9PiBhbnk7XG4gICAgcnVuSWQ6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWVtcHR5LWZ1bmN0aW9uXG4gICAgICAgIHRoaXMub25FdmVudCA9ICgpID0+IHsgfTtcbiAgICAgICAgdGhpcy5ydW5JZCA9IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSB0aGUgYmFja2VuZCwgc2V0dGluZyB1cCBhbnkgZ2xvYmFscyByZXF1aXJlZFxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oUGFweXJvc0V2ZW50KTp2b2lkfSBvbkV2ZW50IENhbGxiYWNrIGZvciB3aGVuIGV2ZW50cyBvY2N1clxuICAgICAqIEBwYXJhbSB7VWludDhBcnJheX0gaW5wdXRUZXh0QXJyYXkgT3B0aW9uYWwgc2hhcmVkIGJ1ZmZlciBmb3IgaW5wdXRcbiAgICAgKiBAcGFyYW0ge0ludDMyQXJyYXl9IGlucHV0TWV0YURhdGEgT3B0aW9uYWwgc2hhcmVkIGJ1ZmZlciBmb3IgbWV0YWRhdGEgYWJvdXQgaW5wdXRcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPHZvaWQ+fSBQcm9taXNlIG9mIGxhdW5jaGluZ1xuICAgICAqL1xuICAgIGxhdW5jaChvbkV2ZW50OiAoZTogUGFweXJvc0V2ZW50KSA9PiB2b2lkLFxuICAgICAgICBpbnB1dFRleHRBcnJheT86IFVpbnQ4QXJyYXksIGlucHV0TWV0YURhdGE/OiBJbnQzMkFycmF5KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGlucHV0Q2FsbGJhY2sgPSBnZXRJbnB1dENhbGxiYWNrKGlucHV0VGV4dEFycmF5LCBpbnB1dE1ldGFEYXRhKTtcbiAgICAgICAgdGhpcy5vbkV2ZW50ID0gKGU6IFBhcHlyb3NFdmVudCkgPT4ge1xuICAgICAgICAgICAgZS5ydW5JZCA9IHRoaXMucnVuSWQ7XG4gICAgICAgICAgICBvbkV2ZW50KGUpO1xuICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gXCJpbnB1dFwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0Q2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFic3RyYWN0IF9ydW5Db2RlSW50ZXJuYWwoY29kZTogc3RyaW5nKTogUHJvbWlzZTxhbnk+O1xuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgYW5kIHJ1biBhcmJpdHJhcnkgY29kZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb2RlIFRoZSBjb2RlIHRvIHJ1blxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBydW5JZCBUaGUgdXVpZCBmb3IgdGhpcyBleGVjdXRpb25cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPHZvaWQ+fSBQcm9taXNlIG9mIGV4ZWN1dGlvblxuICAgICAqL1xuICAgIGFzeW5jIHJ1bkNvZGUoY29kZTogc3RyaW5nLCBydW5JZDogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMucnVuSWQgPSBydW5JZDtcbiAgICAgICAgcGFweXJvc0xvZyhMb2dUeXBlLkRlYnVnLCBcIlJ1bm5pbmcgY29kZSBpbiB3b3JrZXI6IFwiLCBjb2RlKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLl9ydW5Db2RlSW50ZXJuYWwoY29kZSk7XG4gICAgICAgICAgICBwYXB5cm9zTG9nKExvZ1R5cGUuSW1wb3J0YW50LCBcInJhbiBjb2RlOiBcIiArIGNvZGUgKyBcIiBhbmQgcmVjZWl2ZWQ6IFwiLCBkYXRhKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uRXZlbnQoeyB0eXBlOiBcInN1Y2Nlc3NcIiwgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSksIHJ1bklkOiBydW5JZCB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JTdHJpbmcgPVxuICAgICAgICAgICAgICAgIHR5cGVvZiAoZXJyb3IpICE9PSBcInN0cmluZ1wiICYmIFwidG9TdHJpbmdcIiBpbiBlcnJvciA/XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLnRvU3RyaW5nKCkgOlxuICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShlcnJvcik7XG4gICAgICAgICAgICBwYXB5cm9zTG9nKExvZ1R5cGUuRXJyb3IsIFwiRXJyb3IgZHVyaW5nIGV4ZWN1dGlvbjogXCIsIGVycm9yLCBlcnJvclN0cmluZyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbkV2ZW50KHsgdHlwZTogXCJlcnJvclwiLCBkYXRhOiBlcnJvclN0cmluZywgcnVuSWQ6IHJ1bklkIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiLyoqXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgcHJveHlNYXJrZXIgPSBTeW1ib2woXCJDb21saW5rLnByb3h5XCIpO1xyXG5jb25zdCBjcmVhdGVFbmRwb2ludCA9IFN5bWJvbChcIkNvbWxpbmsuZW5kcG9pbnRcIik7XHJcbmNvbnN0IHJlbGVhc2VQcm94eSA9IFN5bWJvbChcIkNvbWxpbmsucmVsZWFzZVByb3h5XCIpO1xyXG5jb25zdCB0aHJvd01hcmtlciA9IFN5bWJvbChcIkNvbWxpbmsudGhyb3duXCIpO1xyXG5jb25zdCBpc09iamVjdCA9ICh2YWwpID0+ICh0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmIHZhbCAhPT0gbnVsbCkgfHwgdHlwZW9mIHZhbCA9PT0gXCJmdW5jdGlvblwiO1xyXG4vKipcclxuICogSW50ZXJuYWwgdHJhbnNmZXIgaGFuZGxlIHRvIGhhbmRsZSBvYmplY3RzIG1hcmtlZCB0byBwcm94eS5cclxuICovXHJcbmNvbnN0IHByb3h5VHJhbnNmZXJIYW5kbGVyID0ge1xyXG4gICAgY2FuSGFuZGxlOiAodmFsKSA9PiBpc09iamVjdCh2YWwpICYmIHZhbFtwcm94eU1hcmtlcl0sXHJcbiAgICBzZXJpYWxpemUob2JqKSB7XHJcbiAgICAgICAgY29uc3QgeyBwb3J0MSwgcG9ydDIgfSA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xyXG4gICAgICAgIGV4cG9zZShvYmosIHBvcnQxKTtcclxuICAgICAgICByZXR1cm4gW3BvcnQyLCBbcG9ydDJdXTtcclxuICAgIH0sXHJcbiAgICBkZXNlcmlhbGl6ZShwb3J0KSB7XHJcbiAgICAgICAgcG9ydC5zdGFydCgpO1xyXG4gICAgICAgIHJldHVybiB3cmFwKHBvcnQpO1xyXG4gICAgfSxcclxufTtcclxuLyoqXHJcbiAqIEludGVybmFsIHRyYW5zZmVyIGhhbmRsZXIgdG8gaGFuZGxlIHRocm93biBleGNlcHRpb25zLlxyXG4gKi9cclxuY29uc3QgdGhyb3dUcmFuc2ZlckhhbmRsZXIgPSB7XHJcbiAgICBjYW5IYW5kbGU6ICh2YWx1ZSkgPT4gaXNPYmplY3QodmFsdWUpICYmIHRocm93TWFya2VyIGluIHZhbHVlLFxyXG4gICAgc2VyaWFsaXplKHsgdmFsdWUgfSkge1xyXG4gICAgICAgIGxldCBzZXJpYWxpemVkO1xyXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQgPSB7XHJcbiAgICAgICAgICAgICAgICBpc0Vycm9yOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB2YWx1ZS5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHZhbHVlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhY2s6IHZhbHVlLnN0YWNrLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQgPSB7IGlzRXJyb3I6IGZhbHNlLCB2YWx1ZSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW3NlcmlhbGl6ZWQsIFtdXTtcclxuICAgIH0sXHJcbiAgICBkZXNlcmlhbGl6ZShzZXJpYWxpemVkKSB7XHJcbiAgICAgICAgaWYgKHNlcmlhbGl6ZWQuaXNFcnJvcikge1xyXG4gICAgICAgICAgICB0aHJvdyBPYmplY3QuYXNzaWduKG5ldyBFcnJvcihzZXJpYWxpemVkLnZhbHVlLm1lc3NhZ2UpLCBzZXJpYWxpemVkLnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgc2VyaWFsaXplZC52YWx1ZTtcclxuICAgIH0sXHJcbn07XHJcbi8qKlxyXG4gKiBBbGxvd3MgY3VzdG9taXppbmcgdGhlIHNlcmlhbGl6YXRpb24gb2YgY2VydGFpbiB2YWx1ZXMuXHJcbiAqL1xyXG5jb25zdCB0cmFuc2ZlckhhbmRsZXJzID0gbmV3IE1hcChbXHJcbiAgICBbXCJwcm94eVwiLCBwcm94eVRyYW5zZmVySGFuZGxlcl0sXHJcbiAgICBbXCJ0aHJvd1wiLCB0aHJvd1RyYW5zZmVySGFuZGxlcl0sXHJcbl0pO1xyXG5mdW5jdGlvbiBleHBvc2Uob2JqLCBlcCA9IHNlbGYpIHtcclxuICAgIGVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGZ1bmN0aW9uIGNhbGxiYWNrKGV2KSB7XHJcbiAgICAgICAgaWYgKCFldiB8fCAhZXYuZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgaWQsIHR5cGUsIHBhdGggfSA9IE9iamVjdC5hc3NpZ24oeyBwYXRoOiBbXSB9LCBldi5kYXRhKTtcclxuICAgICAgICBjb25zdCBhcmd1bWVudExpc3QgPSAoZXYuZGF0YS5hcmd1bWVudExpc3QgfHwgW10pLm1hcChmcm9tV2lyZVZhbHVlKTtcclxuICAgICAgICBsZXQgcmV0dXJuVmFsdWU7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gcGF0aC5zbGljZSgwLCAtMSkucmVkdWNlKChvYmosIHByb3ApID0+IG9ialtwcm9wXSwgb2JqKTtcclxuICAgICAgICAgICAgY29uc3QgcmF3VmFsdWUgPSBwYXRoLnJlZHVjZSgob2JqLCBwcm9wKSA9PiBvYmpbcHJvcF0sIG9iaik7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdFVFwiIC8qIEdFVCAqLzpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gcmF3VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlNFVFwiIC8qIFNFVCAqLzpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFtwYXRoLnNsaWNlKC0xKVswXV0gPSBmcm9tV2lyZVZhbHVlKGV2LmRhdGEudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkFQUExZXCIgLyogQVBQTFkgKi86XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHJhd1ZhbHVlLmFwcGx5KHBhcmVudCwgYXJndW1lbnRMaXN0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiQ09OU1RSVUNUXCIgLyogQ09OU1RSVUNUICovOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBuZXcgcmF3VmFsdWUoLi4uYXJndW1lbnRMaXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBwcm94eSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkVORFBPSU5UXCIgLyogRU5EUE9JTlQgKi86XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHBvcnQxLCBwb3J0MiB9ID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9zZShvYmosIHBvcnQyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSB0cmFuc2Zlcihwb3J0MSwgW3BvcnQxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJFTEVBU0VcIiAvKiBSRUxFQVNFICovOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVyblZhbHVlID0geyB2YWx1ZSwgW3Rocm93TWFya2VyXTogMCB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBQcm9taXNlLnJlc29sdmUocmV0dXJuVmFsdWUpXHJcbiAgICAgICAgICAgIC5jYXRjaCgodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWUsIFt0aHJvd01hcmtlcl06IDAgfTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigocmV0dXJuVmFsdWUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgW3dpcmVWYWx1ZSwgdHJhbnNmZXJhYmxlc10gPSB0b1dpcmVWYWx1ZShyZXR1cm5WYWx1ZSk7XHJcbiAgICAgICAgICAgIGVwLnBvc3RNZXNzYWdlKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgd2lyZVZhbHVlKSwgeyBpZCB9KSwgdHJhbnNmZXJhYmxlcyk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSBcIlJFTEVBU0VcIiAvKiBSRUxFQVNFICovKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBkZXRhY2ggYW5kIGRlYWN0aXZlIGFmdGVyIHNlbmRpbmcgcmVsZWFzZSByZXNwb25zZSBhYm92ZS5cclxuICAgICAgICAgICAgICAgIGVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgIGNsb3NlRW5kUG9pbnQoZXApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIGlmIChlcC5zdGFydCkge1xyXG4gICAgICAgIGVwLnN0YXJ0KCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNNZXNzYWdlUG9ydChlbmRwb2ludCkge1xyXG4gICAgcmV0dXJuIGVuZHBvaW50LmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiTWVzc2FnZVBvcnRcIjtcclxufVxyXG5mdW5jdGlvbiBjbG9zZUVuZFBvaW50KGVuZHBvaW50KSB7XHJcbiAgICBpZiAoaXNNZXNzYWdlUG9ydChlbmRwb2ludCkpXHJcbiAgICAgICAgZW5kcG9pbnQuY2xvc2UoKTtcclxufVxyXG5mdW5jdGlvbiB3cmFwKGVwLCB0YXJnZXQpIHtcclxuICAgIHJldHVybiBjcmVhdGVQcm94eShlcCwgW10sIHRhcmdldCk7XHJcbn1cclxuZnVuY3Rpb24gdGhyb3dJZlByb3h5UmVsZWFzZWQoaXNSZWxlYXNlZCkge1xyXG4gICAgaWYgKGlzUmVsZWFzZWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm94eSBoYXMgYmVlbiByZWxlYXNlZCBhbmQgaXMgbm90IHVzZWFibGVcIik7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlUHJveHkoZXAsIHBhdGggPSBbXSwgdGFyZ2V0ID0gZnVuY3Rpb24gKCkgeyB9KSB7XHJcbiAgICBsZXQgaXNQcm94eVJlbGVhc2VkID0gZmFsc2U7XHJcbiAgICBjb25zdCBwcm94eSA9IG5ldyBQcm94eSh0YXJnZXQsIHtcclxuICAgICAgICBnZXQoX3RhcmdldCwgcHJvcCkge1xyXG4gICAgICAgICAgICB0aHJvd0lmUHJveHlSZWxlYXNlZChpc1Byb3h5UmVsZWFzZWQpO1xyXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gcmVsZWFzZVByb3h5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0UmVzcG9uc2VNZXNzYWdlKGVwLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiUkVMRUFTRVwiIC8qIFJFTEVBU0UgKi8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGgubWFwKChwKSA9PiBwLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUVuZFBvaW50KGVwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNQcm94eVJlbGVhc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHByb3AgPT09IFwidGhlblwiKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGF0aC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB0aGVuOiAoKSA9PiBwcm94eSB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkdFVFwiIC8qIEdFVCAqLyxcclxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBwYXRoLm1hcCgocCkgPT4gcC50b1N0cmluZygpKSxcclxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnJvbVdpcmVWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gci50aGVuLmJpbmQocik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVByb3h5KGVwLCBbLi4ucGF0aCwgcHJvcF0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0KF90YXJnZXQsIHByb3AsIHJhd1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRocm93SWZQcm94eVJlbGVhc2VkKGlzUHJveHlSZWxlYXNlZCk7XHJcbiAgICAgICAgICAgIC8vIEZJWE1FOiBFUzYgUHJveHkgSGFuZGxlciBgc2V0YCBtZXRob2RzIGFyZSBzdXBwb3NlZCB0byByZXR1cm4gYVxyXG4gICAgICAgICAgICAvLyBib29sZWFuLiBUbyBzaG93IGdvb2Qgd2lsbCwgd2UgcmV0dXJuIHRydWUgYXN5bmNocm9ub3VzbHkgwq9cXF8o44OEKV8vwq9cclxuICAgICAgICAgICAgY29uc3QgW3ZhbHVlLCB0cmFuc2ZlcmFibGVzXSA9IHRvV2lyZVZhbHVlKHJhd1ZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiU0VUXCIgLyogU0VUICovLFxyXG4gICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhdGgsIHByb3BdLm1hcCgocCkgPT4gcC50b1N0cmluZygpKSxcclxuICAgICAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgICB9LCB0cmFuc2ZlcmFibGVzKS50aGVuKGZyb21XaXJlVmFsdWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYXBwbHkoX3RhcmdldCwgX3RoaXNBcmcsIHJhd0FyZ3VtZW50TGlzdCkge1xyXG4gICAgICAgICAgICB0aHJvd0lmUHJveHlSZWxlYXNlZChpc1Byb3h5UmVsZWFzZWQpO1xyXG4gICAgICAgICAgICBjb25zdCBsYXN0ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICBpZiAobGFzdCA9PT0gY3JlYXRlRW5kcG9pbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0UmVzcG9uc2VNZXNzYWdlKGVwLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJFTkRQT0lOVFwiIC8qIEVORFBPSU5UICovLFxyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmcm9tV2lyZVZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBXZSBqdXN0IHByZXRlbmQgdGhhdCBgYmluZCgpYCBkaWRu4oCZdCBoYXBwZW4uXHJcbiAgICAgICAgICAgIGlmIChsYXN0ID09PSBcImJpbmRcIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVByb3h5KGVwLCBwYXRoLnNsaWNlKDAsIC0xKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgW2FyZ3VtZW50TGlzdCwgdHJhbnNmZXJhYmxlc10gPSBwcm9jZXNzQXJndW1lbnRzKHJhd0FyZ3VtZW50TGlzdCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXF1ZXN0UmVzcG9uc2VNZXNzYWdlKGVwLCB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcIkFQUExZXCIgLyogQVBQTFkgKi8sXHJcbiAgICAgICAgICAgICAgICBwYXRoOiBwYXRoLm1hcCgocCkgPT4gcC50b1N0cmluZygpKSxcclxuICAgICAgICAgICAgICAgIGFyZ3VtZW50TGlzdCxcclxuICAgICAgICAgICAgfSwgdHJhbnNmZXJhYmxlcykudGhlbihmcm9tV2lyZVZhbHVlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbnN0cnVjdChfdGFyZ2V0LCByYXdBcmd1bWVudExpc3QpIHtcclxuICAgICAgICAgICAgdGhyb3dJZlByb3h5UmVsZWFzZWQoaXNQcm94eVJlbGVhc2VkKTtcclxuICAgICAgICAgICAgY29uc3QgW2FyZ3VtZW50TGlzdCwgdHJhbnNmZXJhYmxlc10gPSBwcm9jZXNzQXJndW1lbnRzKHJhd0FyZ3VtZW50TGlzdCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXF1ZXN0UmVzcG9uc2VNZXNzYWdlKGVwLCB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcIkNPTlNUUlVDVFwiIC8qIENPTlNUUlVDVCAqLyxcclxuICAgICAgICAgICAgICAgIHBhdGg6IHBhdGgubWFwKChwKSA9PiBwLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgYXJndW1lbnRMaXN0LFxyXG4gICAgICAgICAgICB9LCB0cmFuc2ZlcmFibGVzKS50aGVuKGZyb21XaXJlVmFsdWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBwcm94eTtcclxufVxyXG5mdW5jdGlvbiBteUZsYXQoYXJyKSB7XHJcbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgYXJyKTtcclxufVxyXG5mdW5jdGlvbiBwcm9jZXNzQXJndW1lbnRzKGFyZ3VtZW50TGlzdCkge1xyXG4gICAgY29uc3QgcHJvY2Vzc2VkID0gYXJndW1lbnRMaXN0Lm1hcCh0b1dpcmVWYWx1ZSk7XHJcbiAgICByZXR1cm4gW3Byb2Nlc3NlZC5tYXAoKHYpID0+IHZbMF0pLCBteUZsYXQocHJvY2Vzc2VkLm1hcCgodikgPT4gdlsxXSkpXTtcclxufVxyXG5jb25zdCB0cmFuc2ZlckNhY2hlID0gbmV3IFdlYWtNYXAoKTtcclxuZnVuY3Rpb24gdHJhbnNmZXIob2JqLCB0cmFuc2ZlcnMpIHtcclxuICAgIHRyYW5zZmVyQ2FjaGUuc2V0KG9iaiwgdHJhbnNmZXJzKTtcclxuICAgIHJldHVybiBvYmo7XHJcbn1cclxuZnVuY3Rpb24gcHJveHkob2JqKSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmosIHsgW3Byb3h5TWFya2VyXTogdHJ1ZSB9KTtcclxufVxyXG5mdW5jdGlvbiB3aW5kb3dFbmRwb2ludCh3LCBjb250ZXh0ID0gc2VsZiwgdGFyZ2V0T3JpZ2luID0gXCIqXCIpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcG9zdE1lc3NhZ2U6IChtc2csIHRyYW5zZmVyYWJsZXMpID0+IHcucG9zdE1lc3NhZ2UobXNnLCB0YXJnZXRPcmlnaW4sIHRyYW5zZmVyYWJsZXMpLFxyXG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXI6IGNvbnRleHQuYWRkRXZlbnRMaXN0ZW5lci5iaW5kKGNvbnRleHQpLFxyXG4gICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGNvbnRleHQucmVtb3ZlRXZlbnRMaXN0ZW5lci5iaW5kKGNvbnRleHQpLFxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiB0b1dpcmVWYWx1ZSh2YWx1ZSkge1xyXG4gICAgZm9yIChjb25zdCBbbmFtZSwgaGFuZGxlcl0gb2YgdHJhbnNmZXJIYW5kbGVycykge1xyXG4gICAgICAgIGlmIChoYW5kbGVyLmNhbkhhbmRsZSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgY29uc3QgW3NlcmlhbGl6ZWRWYWx1ZSwgdHJhbnNmZXJhYmxlc10gPSBoYW5kbGVyLnNlcmlhbGl6ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJIQU5ETEVSXCIgLyogSEFORExFUiAqLyxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZXJpYWxpemVkVmFsdWUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJhYmxlcyxcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdHlwZTogXCJSQVdcIiAvKiBSQVcgKi8sXHJcbiAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdHJhbnNmZXJDYWNoZS5nZXQodmFsdWUpIHx8IFtdLFxyXG4gICAgXTtcclxufVxyXG5mdW5jdGlvbiBmcm9tV2lyZVZhbHVlKHZhbHVlKSB7XHJcbiAgICBzd2l0Y2ggKHZhbHVlLnR5cGUpIHtcclxuICAgICAgICBjYXNlIFwiSEFORExFUlwiIC8qIEhBTkRMRVIgKi86XHJcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2ZlckhhbmRsZXJzLmdldCh2YWx1ZS5uYW1lKS5kZXNlcmlhbGl6ZSh2YWx1ZS52YWx1ZSk7XHJcbiAgICAgICAgY2FzZSBcIlJBV1wiIC8qIFJBVyAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnZhbHVlO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIG1zZywgdHJhbnNmZXJzKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICBjb25zdCBpZCA9IGdlbmVyYXRlVVVJRCgpO1xyXG4gICAgICAgIGVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGZ1bmN0aW9uIGwoZXYpIHtcclxuICAgICAgICAgICAgaWYgKCFldi5kYXRhIHx8ICFldi5kYXRhLmlkIHx8IGV2LmRhdGEuaWQgIT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXAucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgbCk7XHJcbiAgICAgICAgICAgIHJlc29sdmUoZXYuZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGVwLnN0YXJ0KSB7XHJcbiAgICAgICAgICAgIGVwLnN0YXJ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVwLnBvc3RNZXNzYWdlKE9iamVjdC5hc3NpZ24oeyBpZCB9LCBtc2cpLCB0cmFuc2ZlcnMpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2VuZXJhdGVVVUlEKCkge1xyXG4gICAgcmV0dXJuIG5ldyBBcnJheSg0KVxyXG4gICAgICAgIC5maWxsKDApXHJcbiAgICAgICAgLm1hcCgoKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikudG9TdHJpbmcoMTYpKVxyXG4gICAgICAgIC5qb2luKFwiLVwiKTtcclxufVxuXG5leHBvcnQgeyBjcmVhdGVFbmRwb2ludCwgZXhwb3NlLCBwcm94eSwgcHJveHlNYXJrZXIsIHJlbGVhc2VQcm94eSwgdHJhbnNmZXIsIHRyYW5zZmVySGFuZGxlcnMsIHdpbmRvd0VuZHBvaW50LCB3cmFwIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21saW5rLm1qcy5tYXBcbiJdLCJuYW1lcyI6WyJQcm9ncmFtbWluZ0xhbmd1YWdlIiwiUHl0aG9uIiwiSmF2YVNjcmlwdCIsIk1hcCIsIkxvZ1R5cGUiLCJwYXB5cm9zTG9nIiwibG9nVHlwZSIsImRvTG9nIiwiRGVidWciLCJFcnJvciIsImNvbnNvbGUiLCJlcnJvciIsImFyZ3MiLCJsb2ciLCJ0aGlzIiwib25FdmVudCIsInJ1bklkIiwibGF1bmNoIiwiaW5wdXRUZXh0QXJyYXkiLCJpbnB1dE1ldGFEYXRhIiwiaW5wdXRDYWxsYmFjayIsIlRleHREZWNvZGVyIiwiQXRvbWljcyIsIndhaXQiLCJzdG9yZSIsInNpemUiLCJleGNoYW5nZSIsImJ5dGVzIiwic2xpY2UiLCJkZWNvZGUiLCJyZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2VuZCIsInN0YXR1cyIsInJlc3BvbnNlVGV4dCIsImdldElucHV0Q2FsbGJhY2siLCJlIiwidHlwZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicnVuQ29kZSIsImNvZGUiLCJfcnVuQ29kZUludGVybmFsIiwiZGF0YSIsIkltcG9ydGFudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJlcnJvclN0cmluZyIsInRvU3RyaW5nIiwicHJveHlNYXJrZXIiLCJTeW1ib2wiLCJjcmVhdGVFbmRwb2ludCIsInJlbGVhc2VQcm94eSIsInRocm93TWFya2VyIiwiaXNPYmplY3QiLCJ2YWwiLCJ0cmFuc2ZlckhhbmRsZXJzIiwiY2FuSGFuZGxlIiwic2VyaWFsaXplIiwib2JqIiwicG9ydDEiLCJwb3J0MiIsIk1lc3NhZ2VDaGFubmVsIiwiZXhwb3NlIiwiZGVzZXJpYWxpemUiLCJwb3J0Iiwic3RhcnQiLCJjcmVhdGVQcm94eSIsInRhcmdldCIsInZhbHVlIiwic2VyaWFsaXplZCIsImlzRXJyb3IiLCJtZXNzYWdlIiwibmFtZSIsInN0YWNrIiwiT2JqZWN0IiwiYXNzaWduIiwiZXAiLCJzZWxmIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNhbGxiYWNrIiwiZXYiLCJpZCIsInBhdGgiLCJhcmd1bWVudExpc3QiLCJtYXAiLCJmcm9tV2lyZVZhbHVlIiwicmV0dXJuVmFsdWUiLCJwYXJlbnQiLCJyZWR1Y2UiLCJwcm9wIiwicmF3VmFsdWUiLCJhcHBseSIsInByb3h5IiwidHJhbnNmZXJzIiwidHJhbnNmZXJDYWNoZSIsInNldCIsInRyYW5zZmVyIiwidW5kZWZpbmVkIiwiY2F0Y2giLCJ0aGVuIiwid2lyZVZhbHVlIiwidHJhbnNmZXJhYmxlcyIsInRvV2lyZVZhbHVlIiwicG9zdE1lc3NhZ2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xvc2VFbmRQb2ludCIsImVuZHBvaW50IiwiY29uc3RydWN0b3IiLCJpc01lc3NhZ2VQb3J0IiwiY2xvc2UiLCJ0aHJvd0lmUHJveHlSZWxlYXNlZCIsImlzUmVsZWFzZWQiLCJpc1Byb3h5UmVsZWFzZWQiLCJQcm94eSIsImdldCIsIl90YXJnZXQiLCJyZXF1ZXN0UmVzcG9uc2VNZXNzYWdlIiwicCIsImxlbmd0aCIsInIiLCJiaW5kIiwiX3RoaXNBcmciLCJyYXdBcmd1bWVudExpc3QiLCJsYXN0IiwicHJvY2Vzc0FyZ3VtZW50cyIsImNvbnN0cnVjdCIsInByb2Nlc3NlZCIsInYiLCJhcnIiLCJBcnJheSIsInByb3RvdHlwZSIsImNvbmNhdCIsIldlYWtNYXAiLCJoYW5kbGVyIiwic2VyaWFsaXplZFZhbHVlIiwibXNnIiwiZmlsbCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIk51bWJlciIsIk1BWF9TQUZFX0lOVEVHRVIiLCJqb2luIiwibCJdLCJzb3VyY2VSb290IjoiIn0=