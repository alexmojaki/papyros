"use strict";(self.webpackChunkpapyros=self.webpackChunkpapyros||[]).push([[114],{872:(e,t,n)=>{var r;n.d(t,{z:()=>c}),function(e){e.Python="Python",e.JavaScript="JavaScript"}(r||(r={})),r.Python,r.JavaScript,new Map([["python",r.Python],["javascript",r.JavaScript]]),r.Python;var a,o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},i=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};function s(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e!==a.Debug;r&&(e===a.Error?console.error.apply(console,i([],o(t),!1)):console.log.apply(console,i([],o(t),!1)))}!function(e){e[e.Debug=0]="Debug",e[e.Error=1]="Error",e[e.Important=2]="Important"}(a||(a={}));var c=function(){function e(){this.onEvent=function(){},this.runId=0}return e.prototype.launch=function(e,t,n){var r=this,a=function(e,t){if(e&&t){var n=new TextDecoder;return function(){for(;"timed-out"===Atomics.wait(t,0,0,100););Atomics.store(t,0,0);var r=Atomics.exchange(t,1,0),a=e.slice(0,r);return n.decode(a)}}return function(){var e=new XMLHttpRequest;do{e.open("GET","/__papyros_input",!1),e.send(null)}while(e.status>=400);return e.responseText}}(t,n);return this.onEvent=function(t){if(t.runId=r.runId,e(t),"input"===t.type)return a()},Promise.resolve()},e.prototype.runCode=function(e,t){return n=this,r=void 0,i=function(){var n,r,o;return function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(i){switch(i.label){case 0:this.runId=t,s(a.Debug,"Running code in worker: ",e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._runCodeInternal(e)];case 2:return n=i.sent(),s(a.Important,"ran code: "+e+" and received: ",n),[2,this.onEvent({type:"success",data:n,runId:t})];case 3:return r=i.sent(),o="toString"in r?r.toString():JSON.stringify(r),s(a.Error,"Error during execution: ",r,o),[2,this.onEvent({type:"error",data:o,runId:t})];case 4:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{c(i.next(e))}catch(e){t(e)}}function s(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}c((i=i.apply(n,r||[])).next())}));var n,r,o,i},e}()},375:(e,t,n)=>{n.d(t,{Jj:()=>u});const r=Symbol("Comlink.proxy"),a=Symbol("Comlink.endpoint"),o=Symbol("Comlink.releaseProxy"),i=Symbol("Comlink.thrown"),s=e=>"object"==typeof e&&null!==e||"function"==typeof e,c=new Map([["proxy",{canHandle:e=>s(e)&&e[r],serialize(e){const{port1:t,port2:n}=new MessageChannel;return u(e,t),[n,[n]]},deserialize:e=>(e.start(),f(e,[],undefined))}],["throw",{canHandle:e=>s(e)&&i in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function u(e,t=self){t.addEventListener("message",(function n(a){if(!a||!a.data)return;const{id:o,type:s,path:c}=Object.assign({path:[]},a.data),p=(a.data.argumentList||[]).map(v);let f;try{const t=c.slice(0,-1).reduce(((e,t)=>e[t]),e),n=c.reduce(((e,t)=>e[t]),e);switch(s){case"GET":f=n;break;case"SET":t[c.slice(-1)[0]]=v(a.data.value),f=!0;break;case"APPLY":f=n.apply(t,p);break;case"CONSTRUCT":f=function(e){return Object.assign(e,{[r]:!0})}(new n(...p));break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;u(e,n),f=function(e,t){return y.set(e,t),e}(t,[t])}break;case"RELEASE":f=void 0;break;default:return}}catch(e){f={value:e,[i]:0}}Promise.resolve(f).catch((e=>({value:e,[i]:0}))).then((e=>{const[r,a]=d(e);t.postMessage(Object.assign(Object.assign({},r),{id:o}),a),"RELEASE"===s&&(t.removeEventListener("message",n),l(t))}))})),t.start&&t.start()}function l(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function p(e){if(e)throw new Error("Proxy has been released and is not useable")}function f(e,t=[],n=function(){}){let r=!1;const i=new Proxy(n,{get(n,a){if(p(r),a===o)return()=>m(e,{type:"RELEASE",path:t.map((e=>e.toString()))}).then((()=>{l(e),r=!0}));if("then"===a){if(0===t.length)return{then:()=>i};const n=m(e,{type:"GET",path:t.map((e=>e.toString()))}).then(v);return n.then.bind(n)}return f(e,[...t,a])},set(n,a,o){p(r);const[i,s]=d(o);return m(e,{type:"SET",path:[...t,a].map((e=>e.toString())),value:i},s).then(v)},apply(n,o,i){p(r);const s=t[t.length-1];if(s===a)return m(e,{type:"ENDPOINT"}).then(v);if("bind"===s)return f(e,t.slice(0,-1));const[c,u]=h(i);return m(e,{type:"APPLY",path:t.map((e=>e.toString())),argumentList:c},u).then(v)},construct(n,a){p(r);const[o,i]=h(a);return m(e,{type:"CONSTRUCT",path:t.map((e=>e.toString())),argumentList:o},i).then(v)}});return i}function h(e){const t=e.map(d);return[t.map((e=>e[0])),(n=t.map((e=>e[1])),Array.prototype.concat.apply([],n))];var n}const y=new WeakMap;function d(e){for(const[t,n]of c)if(n.canHandle(e)){const[r,a]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},a]}return[{type:"RAW",value:e},y.get(e)||[]]}function v(e){switch(e.type){case"HANDLER":return c.get(e.name).deserialize(e.value);case"RAW":return e.value}}function m(e,t,n){return new Promise((r=>{const a=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===a&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),n)}))}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBSTJELEVBQUsxQyxHQUNyQyxPQUFPLElBQUl4RCxTQUFTQyxJQUNoQixNQUFNMkMsRUFlSCxJQUFJZ0QsTUFBTSxHQUNaTyxLQUFLLEdBQ0xwRCxLQUFJLElBQU1xRCxLQUFLQyxNQUFNRCxLQUFLRSxTQUFXQyxPQUFPQyxrQkFBa0JoRyxTQUFTLE1BQ3ZFaUcsS0FBSyxLQWpCTmxFLEVBQUdFLGlCQUFpQixXQUFXLFNBQVNpRSxFQUFFL0QsR0FDakNBLEVBQUd0QyxNQUFTc0MsRUFBR3RDLEtBQUt1QyxJQUFNRCxFQUFHdEMsS0FBS3VDLEtBQU9BLElBRzlDTCxFQUFHNEIsb0JBQW9CLFVBQVd1QyxHQUNsQ3pHLEVBQVEwQyxFQUFHdEMsVUFFWGtDLEVBQUdYLE9BQ0hXLEVBQUdYLFFBRVBXLEVBQUcyQixZQUFZN0IsT0FBT0MsT0FBTyxDQUFFTSxHQUFBQSxHQUFNc0QsR0FBTTFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGFweXJvcy8uL3NyYy9Qcm9ncmFtbWluZ0xhbmd1YWdlLnRzIiwid2VicGFjazovL3BhcHlyb3MvLi9zcmMvQ29uc3RhbnRzLnRzIiwid2VicGFjazovL3BhcHlyb3MvLi9zcmMvdXRpbC9Mb2dnaW5nLnRzIiwid2VicGFjazovL3BhcHlyb3MvLi9zcmMvQmFja2VuZC50cyIsIndlYnBhY2s6Ly9wYXB5cm9zLy4vbm9kZV9tb2R1bGVzL2NvbWxpbmsvZGlzdC9lc20vY29tbGluay5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gUHJvZ3JhbW1pbmdMYW5ndWFnZSB7XG4gICAgUHl0aG9uID0gXCJQeXRob25cIixcbiAgICBKYXZhU2NyaXB0ID0gXCJKYXZhU2NyaXB0XCJcbn1cblxuZXhwb3J0IGNvbnN0IFBST0dSQU1NSU5HX0xBTkdVQUdFUyA9IFtcbiAgICBQcm9ncmFtbWluZ0xhbmd1YWdlLlB5dGhvbixcbiAgICBQcm9ncmFtbWluZ0xhbmd1YWdlLkphdmFTY3JpcHRcbl07XG5cbmNvbnN0IExBTkdVQUdFX01BUCA9IG5ldyBNYXAoW1xuICAgIFtcInB5dGhvblwiLCBQcm9ncmFtbWluZ0xhbmd1YWdlLlB5dGhvbl0sXG4gICAgW1wiamF2YXNjcmlwdFwiLCBQcm9ncmFtbWluZ0xhbmd1YWdlLkphdmFTY3JpcHRdXG5dKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBsRnJvbVN0cmluZyhsYW5ndWFnZTogc3RyaW5nKTogUHJvZ3JhbW1pbmdMYW5ndWFnZSB7XG4gICAgY29uc3QgbGFuZ0xDID0gbGFuZ3VhZ2UudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoTEFOR1VBR0VfTUFQLmhhcyhsYW5nTEMpKSB7XG4gICAgICAgIHJldHVybiBMQU5HVUFHRV9NQVAuZ2V0KGxhbmdMQykhO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgbGFuZ3VhZ2U6ICR7bGFuZ3VhZ2V9YCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgUHJvZ3JhbW1pbmdMYW5ndWFnZSB9IGZyb20gXCIuL1Byb2dyYW1taW5nTGFuZ3VhZ2VcIjtcblxuZXhwb3J0IGNvbnN0IE1BSU5fQVBQX0lEID0gXCJwYXB5cm9zXCI7XG5cbmV4cG9ydCBjb25zdCBPVVRQVVRfVEFfSUQgPSBcImNvZGUtb3V0cHV0LWFyZWFcIjtcbmV4cG9ydCBjb25zdCBJTlBVVF9BUkVBX1dSQVBQRVJfSUQgPSBcImNvZGUtaW5wdXQtYXJlYS13cmFwcGVyXCI7XG5leHBvcnQgY29uc3QgSU5QVVRfVEFfSUQgPSBcImNvZGUtaW5wdXQtYXJlYVwiO1xuZXhwb3J0IGNvbnN0IEVESVRPUl9XUkFQUEVSX0lEID0gXCJjb2RlLWFyZWFcIjtcblxuZXhwb3J0IGNvbnN0IFNUQVRFX1NQSU5ORVJfSUQgPSBcInN0YXRlLXNwaW5uZXJcIjtcbmV4cG9ydCBjb25zdCBBUFBMSUNBVElPTl9TVEFURV9URVhUX0lEID0gXCJhcHBsaWNhdGlvbi1zdGF0ZS10ZXh0XCI7XG5cbmV4cG9ydCBjb25zdCBSVU5fQlROX0lEID0gXCJydW4tY29kZS1idG5cIjtcbmV4cG9ydCBjb25zdCBURVJNSU5BVEVfQlROX0lEID0gXCJ0ZXJtaW5hdGUtYnRuXCI7XG5leHBvcnQgY29uc3QgU0VORF9JTlBVVF9CVE5fSUQgPSBcInNlbmQtaW5wdXQtYnRuXCI7XG5leHBvcnQgY29uc3QgU1dJVENIX0lOUFVUX01PREVfQV9JRCA9IFwic3dpdGNoLWlucHV0LW1vZGVcIjtcblxuZXhwb3J0IGNvbnN0IFBST0dSQU1NSU5HX0xBTkdVQUdFX1NFTEVDVF9JRCA9IFwicHJvZ3JhbW1pbmctbGFuZ3VhZ2Utc2VsZWN0XCI7XG5leHBvcnQgY29uc3QgREVGQVVMVF9QUk9HUkFNTUlOR19MQU5HVUFHRSA9IFByb2dyYW1taW5nTGFuZ3VhZ2UuUHl0aG9uO1xuXG5leHBvcnQgY29uc3QgTE9DQUxFX1NFTEVDVF9JRCA9IFwibG9jYWxlLXNlbGVjdFwiO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfTE9DQUxFID0gXCJubFwiO1xuXG5leHBvcnQgY29uc3QgSU5QVVRfUkVMQVRJVkVfVVJMID0gXCIvX19wYXB5cm9zX2lucHV0XCI7XG5cbiIsImV4cG9ydCBlbnVtIExvZ1R5cGUge1xuICAgIERlYnVnLCBFcnJvciwgSW1wb3J0YW50XG59XG5cbmNvbnN0IEVOVklST05NRU5UOiBzdHJpbmcgPSBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCBcImRldmVsb3BtZW50XCI7XG5leHBvcnQgZnVuY3Rpb24gcGFweXJvc0xvZyhsb2dUeXBlOiBMb2dUeXBlLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIGNvbnN0IGRvTG9nID0gRU5WSVJPTk1FTlQgIT09IFwicHJvZHVjdGlvblwiIHx8IGxvZ1R5cGUgIT09IExvZ1R5cGUuRGVidWc7XG4gICAgaWYgKGRvTG9nKSB7XG4gICAgICAgIGlmIChsb2dUeXBlID09PSBMb2dUeXBlLkVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKC4uLmFyZ3MpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coLi4uYXJncyk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBJTlBVVF9SRUxBVElWRV9VUkwgfSBmcm9tIFwiLi9Db25zdGFudHNcIjtcbmltcG9ydCB7IFBhcHlyb3NFdmVudCB9IGZyb20gXCIuL1BhcHlyb3NFdmVudFwiO1xuaW1wb3J0IHsgTG9nVHlwZSwgcGFweXJvc0xvZyB9IGZyb20gXCIuL3V0aWwvTG9nZ2luZ1wiO1xuXG5mdW5jdGlvbiBnZXRJbnB1dENhbGxiYWNrKGlucHV0VGV4dEFycmF5PzogVWludDhBcnJheSwgaW5wdXRNZXRhRGF0YT86IEludDMyQXJyYXkpOiAoKSA9PiBzdHJpbmcge1xuICAgIGlmIChpbnB1dFRleHRBcnJheSAmJiBpbnB1dE1ldGFEYXRhKSB7XG4gICAgICAgIGNvbnN0IHRleHREZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChBdG9taWNzLndhaXQoaW5wdXRNZXRhRGF0YSwgMCwgMCwgMTAwKSA9PT0gXCJ0aW1lZC1vdXRcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBwYXB5cm9zTG9nLmxvZyhcIndhaXRpbmcgb24gaW5wdXRcIik7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIChpbnRlcnJ1cHRCdWZmZXJbMF0gPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQXRvbWljcy5zdG9yZShpbnB1dE1ldGFEYXRhLCAwLCAwKTtcbiAgICAgICAgICAgIGNvbnN0IHNpemUgPSBBdG9taWNzLmV4Y2hhbmdlKGlucHV0TWV0YURhdGEsIDEsIDApO1xuICAgICAgICAgICAgY29uc3QgYnl0ZXMgPSBpbnB1dFRleHRBcnJheS5zbGljZSgwLCBzaXplKTtcbiAgICAgICAgICAgIHJldHVybiB0ZXh0RGVjb2Rlci5kZWNvZGUoYnl0ZXMpO1xuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgLy8gYGZhbHNlYCBtYWtlcyB0aGUgcmVxdWVzdCBzeW5jaHJvbm91c1xuICAgICAgICAgICAgICAgIHJlcXVlc3Qub3BlbihcIkdFVFwiLCBJTlBVVF9SRUxBVElWRV9VUkwsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnNlbmQobnVsbCk7XG4gICAgICAgICAgICB9IHdoaWxlIChyZXF1ZXN0LnN0YXR1cyA+PSA0MDApOyAvLyB0b2RvIGJldHRlciBlcnJvciBoYW5kbGluZ1xuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3QucmVzcG9uc2VUZXh0O1xuICAgICAgICB9O1xuICAgIH1cbn1cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhY2tlbmQge1xuICAgIG9uRXZlbnQ6IChlOiBQYXB5cm9zRXZlbnQpID0+IGFueTtcbiAgICBydW5JZDogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb25cbiAgICAgICAgdGhpcy5vbkV2ZW50ID0gKCkgPT4geyB9O1xuICAgICAgICB0aGlzLnJ1bklkID0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoZSBiYWNrZW5kLCBzZXR0aW5nIHVwIGFueSBnbG9iYWxzIHJlcXVpcmVkXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihQYXB5cm9zRXZlbnQpOnZvaWR9IG9uRXZlbnQgQ2FsbGJhY2sgZm9yIHdoZW4gZXZlbnRzIG9jY3VyXG4gICAgICogQHBhcmFtIHtVaW50OEFycmF5fSBpbnB1dFRleHRBcnJheSBPcHRpb25hbCBzaGFyZWQgYnVmZmVyIGZvciBpbnB1dFxuICAgICAqIEBwYXJhbSB7SW50MzJBcnJheX0gaW5wdXRNZXRhRGF0YSBPcHRpb25hbCBzaGFyZWQgYnVmZmVyIGZvciBtZXRhZGF0YSBhYm91dCBpbnB1dFxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8dm9pZD59IFByb21pc2Ugb2YgbGF1bmNoaW5nXG4gICAgICovXG4gICAgbGF1bmNoKG9uRXZlbnQ6IChlOiBQYXB5cm9zRXZlbnQpID0+IHZvaWQsXG4gICAgICAgIGlucHV0VGV4dEFycmF5PzogVWludDhBcnJheSwgaW5wdXRNZXRhRGF0YT86IEludDMyQXJyYXkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgaW5wdXRDYWxsYmFjayA9IGdldElucHV0Q2FsbGJhY2soaW5wdXRUZXh0QXJyYXksIGlucHV0TWV0YURhdGEpO1xuICAgICAgICB0aGlzLm9uRXZlbnQgPSAoZTogUGFweXJvc0V2ZW50KSA9PiB7XG4gICAgICAgICAgICBlLnJ1bklkID0gdGhpcy5ydW5JZDtcbiAgICAgICAgICAgIG9uRXZlbnQoZSk7XG4gICAgICAgICAgICBpZiAoZS50eXBlID09PSBcImlucHV0XCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXRDYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgYWJzdHJhY3QgX3J1bkNvZGVJbnRlcm5hbChjb2RlOiBzdHJpbmcpOiBQcm9taXNlPGFueT47XG5cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZSBhbmQgcnVuIGFyYml0cmFyeSBjb2RlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgVGhlIGNvZGUgdG8gcnVuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJ1bklkIFRoZSB1dWlkIGZvciB0aGlzIGV4ZWN1dGlvblxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8dm9pZD59IFByb21pc2Ugb2YgZXhlY3V0aW9uXG4gICAgICovXG4gICAgYXN5bmMgcnVuQ29kZShjb2RlOiBzdHJpbmcsIHJ1bklkOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5ydW5JZCA9IHJ1bklkO1xuICAgICAgICBwYXB5cm9zTG9nKExvZ1R5cGUuRGVidWcsIFwiUnVubmluZyBjb2RlIGluIHdvcmtlcjogXCIsIGNvZGUpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuX3J1bkNvZGVJbnRlcm5hbChjb2RlKTtcbiAgICAgICAgICAgIHBhcHlyb3NMb2coTG9nVHlwZS5JbXBvcnRhbnQsIFwicmFuIGNvZGU6IFwiICsgY29kZSArIFwiIGFuZCByZWNlaXZlZDogXCIsIGRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub25FdmVudCh7IHR5cGU6IFwic3VjY2Vzc1wiLCBkYXRhOiBkYXRhLCBydW5JZDogcnVuSWQgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yU3RyaW5nID0gXCJ0b1N0cmluZ1wiIGluIGVycm9yID8gZXJyb3IudG9TdHJpbmcoKSA6IEpTT04uc3RyaW5naWZ5KGVycm9yKTtcbiAgICAgICAgICAgIHBhcHlyb3NMb2coTG9nVHlwZS5FcnJvciwgXCJFcnJvciBkdXJpbmcgZXhlY3V0aW9uOiBcIiwgZXJyb3IsIGVycm9yU3RyaW5nKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uRXZlbnQoeyB0eXBlOiBcImVycm9yXCIsIGRhdGE6IGVycm9yU3RyaW5nLCBydW5JZDogcnVuSWQgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCIvKipcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBwcm94eU1hcmtlciA9IFN5bWJvbChcIkNvbWxpbmsucHJveHlcIik7XHJcbmNvbnN0IGNyZWF0ZUVuZHBvaW50ID0gU3ltYm9sKFwiQ29tbGluay5lbmRwb2ludFwiKTtcclxuY29uc3QgcmVsZWFzZVByb3h5ID0gU3ltYm9sKFwiQ29tbGluay5yZWxlYXNlUHJveHlcIik7XHJcbmNvbnN0IHRocm93TWFya2VyID0gU3ltYm9sKFwiQ29tbGluay50aHJvd25cIik7XHJcbmNvbnN0IGlzT2JqZWN0ID0gKHZhbCkgPT4gKHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgJiYgdmFsICE9PSBudWxsKSB8fCB0eXBlb2YgdmFsID09PSBcImZ1bmN0aW9uXCI7XHJcbi8qKlxyXG4gKiBJbnRlcm5hbCB0cmFuc2ZlciBoYW5kbGUgdG8gaGFuZGxlIG9iamVjdHMgbWFya2VkIHRvIHByb3h5LlxyXG4gKi9cclxuY29uc3QgcHJveHlUcmFuc2ZlckhhbmRsZXIgPSB7XHJcbiAgICBjYW5IYW5kbGU6ICh2YWwpID0+IGlzT2JqZWN0KHZhbCkgJiYgdmFsW3Byb3h5TWFya2VyXSxcclxuICAgIHNlcmlhbGl6ZShvYmopIHtcclxuICAgICAgICBjb25zdCB7IHBvcnQxLCBwb3J0MiB9ID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XHJcbiAgICAgICAgZXhwb3NlKG9iaiwgcG9ydDEpO1xyXG4gICAgICAgIHJldHVybiBbcG9ydDIsIFtwb3J0Ml1dO1xyXG4gICAgfSxcclxuICAgIGRlc2VyaWFsaXplKHBvcnQpIHtcclxuICAgICAgICBwb3J0LnN0YXJ0KCk7XHJcbiAgICAgICAgcmV0dXJuIHdyYXAocG9ydCk7XHJcbiAgICB9LFxyXG59O1xyXG4vKipcclxuICogSW50ZXJuYWwgdHJhbnNmZXIgaGFuZGxlciB0byBoYW5kbGUgdGhyb3duIGV4Y2VwdGlvbnMuXHJcbiAqL1xyXG5jb25zdCB0aHJvd1RyYW5zZmVySGFuZGxlciA9IHtcclxuICAgIGNhbkhhbmRsZTogKHZhbHVlKSA9PiBpc09iamVjdCh2YWx1ZSkgJiYgdGhyb3dNYXJrZXIgaW4gdmFsdWUsXHJcbiAgICBzZXJpYWxpemUoeyB2YWx1ZSB9KSB7XHJcbiAgICAgICAgbGV0IHNlcmlhbGl6ZWQ7XHJcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgc2VyaWFsaXplZCA9IHtcclxuICAgICAgICAgICAgICAgIGlzRXJyb3I6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZToge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHZhbHVlLm1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdmFsdWUubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBzdGFjazogdmFsdWUuc3RhY2ssXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2VyaWFsaXplZCA9IHsgaXNFcnJvcjogZmFsc2UsIHZhbHVlIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbc2VyaWFsaXplZCwgW11dO1xyXG4gICAgfSxcclxuICAgIGRlc2VyaWFsaXplKHNlcmlhbGl6ZWQpIHtcclxuICAgICAgICBpZiAoc2VyaWFsaXplZC5pc0Vycm9yKSB7XHJcbiAgICAgICAgICAgIHRocm93IE9iamVjdC5hc3NpZ24obmV3IEVycm9yKHNlcmlhbGl6ZWQudmFsdWUubWVzc2FnZSksIHNlcmlhbGl6ZWQudmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBzZXJpYWxpemVkLnZhbHVlO1xyXG4gICAgfSxcclxufTtcclxuLyoqXHJcbiAqIEFsbG93cyBjdXN0b21pemluZyB0aGUgc2VyaWFsaXphdGlvbiBvZiBjZXJ0YWluIHZhbHVlcy5cclxuICovXHJcbmNvbnN0IHRyYW5zZmVySGFuZGxlcnMgPSBuZXcgTWFwKFtcclxuICAgIFtcInByb3h5XCIsIHByb3h5VHJhbnNmZXJIYW5kbGVyXSxcclxuICAgIFtcInRocm93XCIsIHRocm93VHJhbnNmZXJIYW5kbGVyXSxcclxuXSk7XHJcbmZ1bmN0aW9uIGV4cG9zZShvYmosIGVwID0gc2VsZikge1xyXG4gICAgZXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgZnVuY3Rpb24gY2FsbGJhY2soZXYpIHtcclxuICAgICAgICBpZiAoIWV2IHx8ICFldi5kYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBpZCwgdHlwZSwgcGF0aCB9ID0gT2JqZWN0LmFzc2lnbih7IHBhdGg6IFtdIH0sIGV2LmRhdGEpO1xyXG4gICAgICAgIGNvbnN0IGFyZ3VtZW50TGlzdCA9IChldi5kYXRhLmFyZ3VtZW50TGlzdCB8fCBbXSkubWFwKGZyb21XaXJlVmFsdWUpO1xyXG4gICAgICAgIGxldCByZXR1cm5WYWx1ZTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBwYXRoLnNsaWNlKDAsIC0xKS5yZWR1Y2UoKG9iaiwgcHJvcCkgPT4gb2JqW3Byb3BdLCBvYmopO1xyXG4gICAgICAgICAgICBjb25zdCByYXdWYWx1ZSA9IHBhdGgucmVkdWNlKChvYmosIHByb3ApID0+IG9ialtwcm9wXSwgb2JqKTtcclxuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR0VUXCIgLyogR0VUICovOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSByYXdWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiU0VUXCIgLyogU0VUICovOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50W3BhdGguc2xpY2UoLTEpWzBdXSA9IGZyb21XaXJlVmFsdWUoZXYuZGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiQVBQTFlcIiAvKiBBUFBMWSAqLzpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gcmF3VmFsdWUuYXBwbHkocGFyZW50LCBhcmd1bWVudExpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJDT05TVFJVQ1RcIiAvKiBDT05TVFJVQ1QgKi86XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IG5ldyByYXdWYWx1ZSguLi5hcmd1bWVudExpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHByb3h5KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiRU5EUE9JTlRcIiAvKiBFTkRQT0lOVCAqLzpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgcG9ydDEsIHBvcnQyIH0gPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3NlKG9iaiwgcG9ydDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHRyYW5zZmVyKHBvcnQxLCBbcG9ydDFdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUkVMRUFTRVwiIC8qIFJFTEVBU0UgKi86XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAodmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSB7IHZhbHVlLCBbdGhyb3dNYXJrZXJdOiAwIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZShyZXR1cm5WYWx1ZSlcclxuICAgICAgICAgICAgLmNhdGNoKCh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZSwgW3Rocm93TWFya2VyXTogMCB9O1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKChyZXR1cm5WYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBbd2lyZVZhbHVlLCB0cmFuc2ZlcmFibGVzXSA9IHRvV2lyZVZhbHVlKHJldHVyblZhbHVlKTtcclxuICAgICAgICAgICAgZXAucG9zdE1lc3NhZ2UoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB3aXJlVmFsdWUpLCB7IGlkIH0pLCB0cmFuc2ZlcmFibGVzKTtcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT09IFwiUkVMRUFTRVwiIC8qIFJFTEVBU0UgKi8pIHtcclxuICAgICAgICAgICAgICAgIC8vIGRldGFjaCBhbmQgZGVhY3RpdmUgYWZ0ZXIgc2VuZGluZyByZWxlYXNlIHJlc3BvbnNlIGFib3ZlLlxyXG4gICAgICAgICAgICAgICAgZXAucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgY2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgY2xvc2VFbmRQb2ludChlcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgaWYgKGVwLnN0YXJ0KSB7XHJcbiAgICAgICAgZXAuc3RhcnQoKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc01lc3NhZ2VQb3J0KGVuZHBvaW50KSB7XHJcbiAgICByZXR1cm4gZW5kcG9pbnQuY29uc3RydWN0b3IubmFtZSA9PT0gXCJNZXNzYWdlUG9ydFwiO1xyXG59XHJcbmZ1bmN0aW9uIGNsb3NlRW5kUG9pbnQoZW5kcG9pbnQpIHtcclxuICAgIGlmIChpc01lc3NhZ2VQb3J0KGVuZHBvaW50KSlcclxuICAgICAgICBlbmRwb2ludC5jbG9zZSgpO1xyXG59XHJcbmZ1bmN0aW9uIHdyYXAoZXAsIHRhcmdldCkge1xyXG4gICAgcmV0dXJuIGNyZWF0ZVByb3h5KGVwLCBbXSwgdGFyZ2V0KTtcclxufVxyXG5mdW5jdGlvbiB0aHJvd0lmUHJveHlSZWxlYXNlZChpc1JlbGVhc2VkKSB7XHJcbiAgICBpZiAoaXNSZWxlYXNlZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb3h5IGhhcyBiZWVuIHJlbGVhc2VkIGFuZCBpcyBub3QgdXNlYWJsZVwiKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjcmVhdGVQcm94eShlcCwgcGF0aCA9IFtdLCB0YXJnZXQgPSBmdW5jdGlvbiAoKSB7IH0pIHtcclxuICAgIGxldCBpc1Byb3h5UmVsZWFzZWQgPSBmYWxzZTtcclxuICAgIGNvbnN0IHByb3h5ID0gbmV3IFByb3h5KHRhcmdldCwge1xyXG4gICAgICAgIGdldChfdGFyZ2V0LCBwcm9wKSB7XHJcbiAgICAgICAgICAgIHRocm93SWZQcm94eVJlbGVhc2VkKGlzUHJveHlSZWxlYXNlZCk7XHJcbiAgICAgICAgICAgIGlmIChwcm9wID09PSByZWxlYXNlUHJveHkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJSRUxFQVNFXCIgLyogUkVMRUFTRSAqLyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogcGF0aC5tYXAoKHApID0+IHAudG9TdHJpbmcoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlRW5kUG9pbnQoZXApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1Byb3h5UmVsZWFzZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gXCJ0aGVuXCIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHRoZW46ICgpID0+IHByb3h5IH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCByID0gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIgLyogR0VUICovLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGgubWFwKChwKSA9PiBwLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmcm9tV2lyZVZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByLnRoZW4uYmluZChyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlUHJveHkoZXAsIFsuLi5wYXRoLCBwcm9wXSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQoX3RhcmdldCwgcHJvcCwgcmF3VmFsdWUpIHtcclxuICAgICAgICAgICAgdGhyb3dJZlByb3h5UmVsZWFzZWQoaXNQcm94eVJlbGVhc2VkKTtcclxuICAgICAgICAgICAgLy8gRklYTUU6IEVTNiBQcm94eSBIYW5kbGVyIGBzZXRgIG1ldGhvZHMgYXJlIHN1cHBvc2VkIHRvIHJldHVybiBhXHJcbiAgICAgICAgICAgIC8vIGJvb2xlYW4uIFRvIHNob3cgZ29vZCB3aWxsLCB3ZSByZXR1cm4gdHJ1ZSBhc3luY2hyb25vdXNseSDCr1xcXyjjg4QpXy/Cr1xyXG4gICAgICAgICAgICBjb25zdCBbdmFsdWUsIHRyYW5zZmVyYWJsZXNdID0gdG9XaXJlVmFsdWUocmF3VmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJTRVRcIiAvKiBTRVQgKi8sXHJcbiAgICAgICAgICAgICAgICBwYXRoOiBbLi4ucGF0aCwgcHJvcF0ubWFwKChwKSA9PiBwLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICAgIH0sIHRyYW5zZmVyYWJsZXMpLnRoZW4oZnJvbVdpcmVWYWx1ZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhcHBseShfdGFyZ2V0LCBfdGhpc0FyZywgcmF3QXJndW1lbnRMaXN0KSB7XHJcbiAgICAgICAgICAgIHRocm93SWZQcm94eVJlbGVhc2VkKGlzUHJveHlSZWxlYXNlZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhc3QgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgIGlmIChsYXN0ID09PSBjcmVhdGVFbmRwb2ludCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkVORFBPSU5UXCIgLyogRU5EUE9JTlQgKi8sXHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZyb21XaXJlVmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFdlIGp1c3QgcHJldGVuZCB0aGF0IGBiaW5kKClgIGRpZG7igJl0IGhhcHBlbi5cclxuICAgICAgICAgICAgaWYgKGxhc3QgPT09IFwiYmluZFwiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlUHJveHkoZXAsIHBhdGguc2xpY2UoMCwgLTEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBbYXJndW1lbnRMaXN0LCB0cmFuc2ZlcmFibGVzXSA9IHByb2Nlc3NBcmd1bWVudHMocmF3QXJndW1lbnRMaXN0KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiQVBQTFlcIiAvKiBBUFBMWSAqLyxcclxuICAgICAgICAgICAgICAgIHBhdGg6IHBhdGgubWFwKChwKSA9PiBwLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgYXJndW1lbnRMaXN0LFxyXG4gICAgICAgICAgICB9LCB0cmFuc2ZlcmFibGVzKS50aGVuKGZyb21XaXJlVmFsdWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29uc3RydWN0KF90YXJnZXQsIHJhd0FyZ3VtZW50TGlzdCkge1xyXG4gICAgICAgICAgICB0aHJvd0lmUHJveHlSZWxlYXNlZChpc1Byb3h5UmVsZWFzZWQpO1xyXG4gICAgICAgICAgICBjb25zdCBbYXJndW1lbnRMaXN0LCB0cmFuc2ZlcmFibGVzXSA9IHByb2Nlc3NBcmd1bWVudHMocmF3QXJndW1lbnRMaXN0KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiQ09OU1RSVUNUXCIgLyogQ09OU1RSVUNUICovLFxyXG4gICAgICAgICAgICAgICAgcGF0aDogcGF0aC5tYXAoKHApID0+IHAudG9TdHJpbmcoKSksXHJcbiAgICAgICAgICAgICAgICBhcmd1bWVudExpc3QsXHJcbiAgICAgICAgICAgIH0sIHRyYW5zZmVyYWJsZXMpLnRoZW4oZnJvbVdpcmVWYWx1ZSk7XHJcbiAgICAgICAgfSxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHByb3h5O1xyXG59XHJcbmZ1bmN0aW9uIG15RmxhdChhcnIpIHtcclxuICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBhcnIpO1xyXG59XHJcbmZ1bmN0aW9uIHByb2Nlc3NBcmd1bWVudHMoYXJndW1lbnRMaXN0KSB7XHJcbiAgICBjb25zdCBwcm9jZXNzZWQgPSBhcmd1bWVudExpc3QubWFwKHRvV2lyZVZhbHVlKTtcclxuICAgIHJldHVybiBbcHJvY2Vzc2VkLm1hcCgodikgPT4gdlswXSksIG15RmxhdChwcm9jZXNzZWQubWFwKCh2KSA9PiB2WzFdKSldO1xyXG59XHJcbmNvbnN0IHRyYW5zZmVyQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xyXG5mdW5jdGlvbiB0cmFuc2ZlcihvYmosIHRyYW5zZmVycykge1xyXG4gICAgdHJhbnNmZXJDYWNoZS5zZXQob2JqLCB0cmFuc2ZlcnMpO1xyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG5mdW5jdGlvbiBwcm94eShvYmopIHtcclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iaiwgeyBbcHJveHlNYXJrZXJdOiB0cnVlIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHdpbmRvd0VuZHBvaW50KHcsIGNvbnRleHQgPSBzZWxmLCB0YXJnZXRPcmlnaW4gPSBcIipcIikge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBwb3N0TWVzc2FnZTogKG1zZywgdHJhbnNmZXJhYmxlcykgPT4gdy5wb3N0TWVzc2FnZShtc2csIHRhcmdldE9yaWdpbiwgdHJhbnNmZXJhYmxlcyksXHJcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogY29udGV4dC5hZGRFdmVudExpc3RlbmVyLmJpbmQoY29udGV4dCksXHJcbiAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogY29udGV4dC5yZW1vdmVFdmVudExpc3RlbmVyLmJpbmQoY29udGV4dCksXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIHRvV2lyZVZhbHVlKHZhbHVlKSB7XHJcbiAgICBmb3IgKGNvbnN0IFtuYW1lLCBoYW5kbGVyXSBvZiB0cmFuc2ZlckhhbmRsZXJzKSB7XHJcbiAgICAgICAgaWYgKGhhbmRsZXIuY2FuSGFuZGxlKHZhbHVlKSkge1xyXG4gICAgICAgICAgICBjb25zdCBbc2VyaWFsaXplZFZhbHVlLCB0cmFuc2ZlcmFibGVzXSA9IGhhbmRsZXIuc2VyaWFsaXplKHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkhBTkRMRVJcIiAvKiBIQU5ETEVSICovLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlcmlhbGl6ZWRWYWx1ZSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0cmFuc2ZlcmFibGVzLFxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0eXBlOiBcIlJBV1wiIC8qIFJBVyAqLyxcclxuICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0cmFuc2ZlckNhY2hlLmdldCh2YWx1ZSkgfHwgW10sXHJcbiAgICBdO1xyXG59XHJcbmZ1bmN0aW9uIGZyb21XaXJlVmFsdWUodmFsdWUpIHtcclxuICAgIHN3aXRjaCAodmFsdWUudHlwZSkge1xyXG4gICAgICAgIGNhc2UgXCJIQU5ETEVSXCIgLyogSEFORExFUiAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIHRyYW5zZmVySGFuZGxlcnMuZ2V0KHZhbHVlLm5hbWUpLmRlc2VyaWFsaXplKHZhbHVlLnZhbHVlKTtcclxuICAgICAgICBjYXNlIFwiUkFXXCIgLyogUkFXICovOlxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUudmFsdWU7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwgbXNnLCB0cmFuc2ZlcnMpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlkID0gZ2VuZXJhdGVVVUlEKCk7XHJcbiAgICAgICAgZXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgZnVuY3Rpb24gbChldikge1xyXG4gICAgICAgICAgICBpZiAoIWV2LmRhdGEgfHwgIWV2LmRhdGEuaWQgfHwgZXYuZGF0YS5pZCAhPT0gaWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlcC5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBsKTtcclxuICAgICAgICAgICAgcmVzb2x2ZShldi5kYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoZXAuc3RhcnQpIHtcclxuICAgICAgICAgICAgZXAuc3RhcnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZXAucG9zdE1lc3NhZ2UoT2JqZWN0LmFzc2lnbih7IGlkIH0sIG1zZyksIHRyYW5zZmVycyk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZW5lcmF0ZVVVSUQoKSB7XHJcbiAgICByZXR1cm4gbmV3IEFycmF5KDQpXHJcbiAgICAgICAgLmZpbGwoMClcclxuICAgICAgICAubWFwKCgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKS50b1N0cmluZygxNikpXHJcbiAgICAgICAgLmpvaW4oXCItXCIpO1xyXG59XG5cbmV4cG9ydCB7IGNyZWF0ZUVuZHBvaW50LCBleHBvc2UsIHByb3h5LCBwcm94eU1hcmtlciwgcmVsZWFzZVByb3h5LCB0cmFuc2ZlciwgdHJhbnNmZXJIYW5kbGVycywgd2luZG93RW5kcG9pbnQsIHdyYXAgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbWxpbmsubWpzLm1hcFxuIl0sIm5hbWVzIjpbIlByb2dyYW1taW5nTGFuZ3VhZ2UiLCJQeXRob24iLCJKYXZhU2NyaXB0IiwiTWFwIiwiTG9nVHlwZSIsInBhcHlyb3NMb2ciLCJsb2dUeXBlIiwiZG9Mb2ciLCJEZWJ1ZyIsIkVycm9yIiwiY29uc29sZSIsImVycm9yIiwiYXJncyIsImxvZyIsInRoaXMiLCJvbkV2ZW50IiwicnVuSWQiLCJsYXVuY2giLCJpbnB1dFRleHRBcnJheSIsImlucHV0TWV0YURhdGEiLCJpbnB1dENhbGxiYWNrIiwiVGV4dERlY29kZXIiLCJBdG9taWNzIiwid2FpdCIsInN0b3JlIiwic2l6ZSIsImV4Y2hhbmdlIiwiYnl0ZXMiLCJzbGljZSIsImRlY29kZSIsInJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZW5kIiwic3RhdHVzIiwicmVzcG9uc2VUZXh0IiwiZ2V0SW5wdXRDYWxsYmFjayIsImUiLCJ0eXBlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJydW5Db2RlIiwiY29kZSIsIl9ydW5Db2RlSW50ZXJuYWwiLCJkYXRhIiwiSW1wb3J0YW50IiwiZXJyb3JTdHJpbmciLCJ0b1N0cmluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJwcm94eU1hcmtlciIsIlN5bWJvbCIsImNyZWF0ZUVuZHBvaW50IiwicmVsZWFzZVByb3h5IiwidGhyb3dNYXJrZXIiLCJpc09iamVjdCIsInZhbCIsInRyYW5zZmVySGFuZGxlcnMiLCJjYW5IYW5kbGUiLCJzZXJpYWxpemUiLCJvYmoiLCJwb3J0MSIsInBvcnQyIiwiTWVzc2FnZUNoYW5uZWwiLCJleHBvc2UiLCJkZXNlcmlhbGl6ZSIsInBvcnQiLCJzdGFydCIsImNyZWF0ZVByb3h5IiwidGFyZ2V0IiwidmFsdWUiLCJzZXJpYWxpemVkIiwiaXNFcnJvciIsIm1lc3NhZ2UiLCJuYW1lIiwic3RhY2siLCJPYmplY3QiLCJhc3NpZ24iLCJlcCIsInNlbGYiLCJhZGRFdmVudExpc3RlbmVyIiwiY2FsbGJhY2siLCJldiIsImlkIiwicGF0aCIsImFyZ3VtZW50TGlzdCIsIm1hcCIsImZyb21XaXJlVmFsdWUiLCJyZXR1cm5WYWx1ZSIsInBhcmVudCIsInJlZHVjZSIsInByb3AiLCJyYXdWYWx1ZSIsImFwcGx5IiwicHJveHkiLCJ0cmFuc2ZlcnMiLCJ0cmFuc2ZlckNhY2hlIiwic2V0IiwidHJhbnNmZXIiLCJ1bmRlZmluZWQiLCJjYXRjaCIsInRoZW4iLCJ3aXJlVmFsdWUiLCJ0cmFuc2ZlcmFibGVzIiwidG9XaXJlVmFsdWUiLCJwb3N0TWVzc2FnZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbG9zZUVuZFBvaW50IiwiZW5kcG9pbnQiLCJjb25zdHJ1Y3RvciIsImlzTWVzc2FnZVBvcnQiLCJjbG9zZSIsInRocm93SWZQcm94eVJlbGVhc2VkIiwiaXNSZWxlYXNlZCIsImlzUHJveHlSZWxlYXNlZCIsIlByb3h5IiwiZ2V0IiwiX3RhcmdldCIsInJlcXVlc3RSZXNwb25zZU1lc3NhZ2UiLCJwIiwibGVuZ3RoIiwiciIsImJpbmQiLCJfdGhpc0FyZyIsInJhd0FyZ3VtZW50TGlzdCIsImxhc3QiLCJwcm9jZXNzQXJndW1lbnRzIiwiY29uc3RydWN0IiwicHJvY2Vzc2VkIiwidiIsImFyciIsIkFycmF5IiwicHJvdG90eXBlIiwiY29uY2F0IiwiV2Vha01hcCIsImhhbmRsZXIiLCJzZXJpYWxpemVkVmFsdWUiLCJtc2ciLCJmaWxsIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiTnVtYmVyIiwiTUFYX1NBRkVfSU5URUdFUiIsImpvaW4iLCJsIl0sInNvdXJjZVJvb3QiOiIifQ==